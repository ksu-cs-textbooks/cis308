<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Julie Thornton
Computer Science Department
Kansas State University
Email: juliet@ksu.edu
This is the textbook for CIS 308, C Language Lab, at Kansas State University. The course assumes students have significant programming background in a high-level language like C# or Java. It also assumes familiarity with common data structures (linked lists, stacks, queues, binary search trees, hash tables, and graphs) and their implementations."><meta name=author content="Julie Thornton"><meta name=twitter:card content="summary"><meta name=twitter:title content="CIS 308 Textbook"><meta name=twitter:description content="Julie Thornton
Computer Science Department
Kansas State University
Email: juliet@ksu.edu
This is the textbook for CIS 308, C Language Lab, at Kansas State University. The course assumes students have significant programming background in a high-level language like C# or Java. It also assumes familiarity with common data structures (linked lists, stacks, queues, binary search trees, hash tables, and graphs) and their implementations."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis308/"><meta property="og:site_name" content="CIS 308 Textbook"><meta property="og:title" content="CIS 308 Textbook"><meta property="og:description" content="Julie Thornton
Computer Science Department
Kansas State University
Email: juliet@ksu.edu
This is the textbook for CIS 308, C Language Lab, at Kansas State University. The course assumes students have significant programming background in a high-level language like C# or Java. It also assumes familiarity with common data structures (linked lists, stacks, queues, binary search trees, hash tables, and graphs) and their implementations."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="CIS 308 Textbook"><meta itemprop=description content="Julie Thornton
Computer Science Department
Kansas State University
Email: juliet@ksu.edu
This is the textbook for CIS 308, C Language Lab, at Kansas State University. The course assumes students have significant programming background in a high-level language like C# or Java. It also assumes familiarity with common data structures (linked lists, stacks, queues, binary search trees, hash tables, and graphs) and their implementations."><meta itemprop=dateModified content="2023-08-10T15:07:40-05:00"><meta itemprop=wordCount content="62"><title>CIS 308 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis308/ rel=canonical type=text/html title="CIS 308 Textbook"><link href=/cis308/index.xml rel=alternate type=application/rss+xml title="CIS 308 Textbook"><link href=/cis308/css/fontawesome-all.min.css?1737135072 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/fontawesome-all.min.css?1737135072 rel=stylesheet></noscript><link href=/cis308/css/nucleus.css?1737135072 rel=stylesheet><link href=/cis308/css/auto-complete.css?1737135072 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/auto-complete.css?1737135072 rel=stylesheet></noscript><link href=/cis308/css/perfect-scrollbar.min.css?1737135072 rel=stylesheet><link href=/cis308/css/fonts.css?1737135072 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/fonts.css?1737135072 rel=stylesheet></noscript><link href=/cis308/css/theme.css?1737135072 rel=stylesheet><link href=/cis308/css/theme-auto.css?1737135072 rel=stylesheet id=R-variant-style><link href=/cis308/css/chroma-auto.css?1737135072 rel=stylesheet id=R-variant-chroma-style><link href=/cis308/css/variant.css?1737135072 rel=stylesheet><link href=/cis308/css/print.css?1737135072 rel=stylesheet media=print><link href=/cis308/css/format-print.css?1737135072 rel=stylesheet><script src=/cis308/js/variant.js?1737135072></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath=".",window.relearn.relBaseUri="..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis308",window.index_js_url="/cis308/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis308/css/custom.css?1737135072 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis308/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class=topbar-control><i class="fa-fw fas fa-chevron-left"></i></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis308/0-chapter/ title="Getting Started (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable home" tabindex=-1><div class=flex-block-wrapper><article class=home><header class=headline></header><h1 id=cis-308-textbook>CIS 308 Textbook</h1><p>Julie Thornton<br>Computer Science Department<br>Kansas State University</p><p>Email: <a href=mailto:juliet@ksu.edu rel=external target=_blank>juliet@ksu.edu</a></p><p>This is the textbook for CIS 308, <em>C Language Lab</em>, at Kansas State University. The course assumes students have significant programming background in a high-level language like C# or Java. It also assumes familiarity with common data structures (linked lists, stacks, queues, binary search trees, hash tables, and graphs) and their implementations.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of CIS 308 Textbook</h1><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 0</div><h1 id=getting-started>Getting Started</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Getting Started</h1><article class=default><header class=headline></header><h1 id=vs-code>VS Code</h1><h2 id=vs-code>VS Code</h2><p>In CIS 308, we will edit our C programs using VS Code with C/C++ extensions. You likely already have Visual Studio (2019 or 2022) installed on your computer from CIS 300 and/or 400 &ndash; however, we will not be using Visual Studio in CIS 308. While it does have a C++ compiler, it behaves differently than more widely accepted C compilers (versions of gcc and clang). Finally, this class has a secondary goal of exposing students to a variety of Unix/Linux tools &ndash; something that cannot be done as easily in Visual Studio.</p><p>You can download VS Code <a href=https://code.visualstudio.com/download rel=external target=_blank>here</a>:</p><p><a href=#R-image-0abaee2e13b3693ae86fe8baffafaa48 class=lightbox-link><img alt="VS Code download" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/vsCodeDownload.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0abaee2e13b3693ae86fe8baffafaa48><img alt="VS Code download" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/vsCodeDownload.png></a></p><p>Install VS Code. When you see the prompt below, I recommend adding the &ldquo;Open with code&rdquo; action for both files and directories:</p><p><a href=#R-image-31a716e7692da645044aad0232222275 class=lightbox-link><img alt="Open with code" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/addAction.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-31a716e7692da645044aad0232222275><img alt="Open with code" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/addAction.png></a></p><h3 id=cc-extensions>C/C++ extensions</h3><p>If you are prompted to install C/C++, do so. If you are not, launch VS Code and select &ldquo;Extensions&rdquo; from the left-hand toolbar. From there, you can find and install &ldquo;C/C++&rdquo; (this will add syntax highlighting to our C programs).</p><p>We ONLY need C/C++, not the whole extension pack.</p><h3 id=vs-code-integrated-terminal>VS Code integrated terminal</h3><p>We will be using the integrated terminal within VS Code, so that we can have the editor and the terminal (for compiling and running) within the same frame. If you do not see the Terminal at the bottom of VS code, select Terminal->New Terminal.</p><p>Windows users will want to select <em>powershell</em> as their terminal type, and Mac users will want to select the Mac terminal.</p><h2 id=get-the-compiler>Get the compiler</h2><p>VS code does not contain a C compiler (even with the C/C++ extensions) &ndash; we will need to install one.</p><h3 id=windows-users>Windows users</h3><p>I recommend using either MSYS2 or WSL. (I prefer WSL, but on some systems it requires a BIOS edit before it will work.) You can download MSYS2 <a href=https://www.msys2.org/ rel=external target=_blank>here</a>. Follow the installation instructions.</p><p>Then, launch an MSYS2 shell (click Start, type MSYS2, and run the app). In the resulting shell, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pacman -S base-devel gcc</span></span></code></pre></div><p>When prompted, say Y. You should now have both <code>gcc</code> and <code>make</code> installed.</p><p>In order to use these commands from the command prompt, you will need to add their location to your Path. Check both <code>C:\msys64\mingw64\bin</code> and <code>C:\msys64\usr\bin</code> &ndash; copy the address of whichever location contains <code>gcc.exe</code>.</p><p>Next, add that location to your Path. Click Start, type <em>Environment variables</em>, and select &ldquo;Edit the system environment variables&rdquo;). Click &ldquo;Environment Variables..&rdquo;, then find Path under System variables and click &ldquo;Edit&mldr;&rdquo;. Click &ldquo;New&rdquo;, paste in the address you copied in the previous step, and click OK three times to dismiss each frame.</p><p>Open VS Code with an integrated terminal. Try typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc</span></span></code></pre></div><p>and then:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>make</span></span></code></pre></div><p>You should see an error that no input files were provided (and not that the term is unrecognized).</p><h3 id=mac-users>Mac users</h3><p>After installing VS Code with C/C++, follow this <a href=https://code.visualstudio.com/docs/cpp/config-clang-mac rel=external target=_blank>user guide</a> to get gcc and make.</p><p>Open VS Code with an integrated terminal, and type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc --version</span></span></code></pre></div><p>If you get an error that <code>gcc</code> is unrecognized, run the command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>xcode-select --install</span></span></code></pre></div><p>If you try <code>gcc --version</code> again, it should give you a version number.</p><h2 id=organizing-labs>Organizing labs</h2><p>I recommend that you create a folder specifically for CIS 308, and then create subfolders within that folder for each lab assignment. If you are using the lab machines, you will want to put this folder on the U: drive, as files saved in other locations may be deleted.</p><p>When you are ready to start a lab assignment, right-click your CIS 308 folder and select &ldquo;Open with Code&rdquo;:</p><p><a href=#R-image-a40d2e91249008e97a4333234c3bc523 class=lightbox-link><img alt="Open with code" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/openWithCode.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a40d2e91249008e97a4333234c3bc523><img alt="Open with code" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/openWithCode.png></a></p><p>This will open everything within your CIS 308 subfolder in VS Code:</p><p><a href=#R-image-6012b14c57a83f8112de68ba889ff82c class=lightbox-link><img alt="Project view" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/vsCodeProjView.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6012b14c57a83f8112de68ba889ff82c><img alt="Project view" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/vsCodeProjView.png></a></p><p>Now, display the integrated terminal in VS Code (Terminal->New Terminal):</p><p><a href=#R-image-f6a6e13d7bf78f4e520f27837b2b6b4d class=lightbox-link><img alt=Terminal class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/vsCodeWithTerminal.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f6a6e13d7bf78f4e520f27837b2b6b4d><img alt=Terminal class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/vsCodeWithTerminal.png></a></p><p>(My directory structure might look strange because I created a second CIS 308 folder for the purposes of making these screenshots.)</p><h3 id=starting-the-next-lab>Starting the next lab</h3><p>After following the instructions above to open VS Code to your CIS 308 folder with the integrated terminal displayed, you are ready to create a new, empty folder for the current lab. Suppose we are ready for lab 3. In the integrated terminal, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>mkdir lab3</span></span></code></pre></div><p>You should see a new <em>lab3</em> folder in the project view on the left:</p><p><a href=#R-image-424ca48b129eb37cca99401c4346db9d class=lightbox-link><img alt="New folder" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/newFolder.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-424ca48b129eb37cca99401c4346db9d><img alt="New folder" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/newFolder.png></a></p><p>Next, use the <code>cd</code> command in the integrated terminal to change directories to your new folder. Type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>cd lab3</span></span></code></pre></div><p>(or whatever the current lab is). You should notice that the directory listed in the terminal prompt ends with you new folder, like this:</p><p><a href=#R-image-881b83e3db67bea0e9fda66f02bf7c2a class=lightbox-link><img alt="Change directories" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/cd.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-881b83e3db67bea0e9fda66f02bf7c2a><img alt="Change directories" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/cd.png></a></p><p>You are now ready to follow the steps in the next section, &ldquo;Using Git&rdquo;, to clone the starting repository for your lab.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=using-git>Using git</h1><p>This class will use GitHub links to create initial repositories for both labs and programming projects, similarly to what you have done in CIS 300 and 301.</p><h2 id=github-account>GitHub account</h2><p>First, you will need to create a GitHub account <a href=https://github.com/ rel=external target=_blank>here</a>. If you already have one, you can use your existing account.</p><h2 id=verify-a-git-install>Verify a git install</h2><p>You will likely already have a command-line version of <code>git</code> installed on your machine. To check, open a folder in VS Code, display the integrated terminal, and type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>git --version</span></span></code></pre></div><p>You should see a version number printing out. If you see that, <code>git</code> is already installed.</p><p>If you see an error that <code>git</code> is unrecognized, then you will need to install it. Go <a href=https://git-scm.com/downloads rel=external target=_blank>here</a> to download and install the latest version.</p><p>Windows users may need to add the <code>git.exe</code> location to the system <code>Path</code> environment variables. Most likely, <code>git.exe</code> will be installed to <code>C:\Program Files\Git\bin</code>. Check this location, copy its address, and type &ldquo;Environment variables&rdquo; in the Windows search. Click &ldquo;Environment Variables&rdquo; and find &ldquo;Path&rdquo; under System variables. Click &ldquo;Edit&mldr;&rdquo;. Verify that <code>C:\Program Files\Git\bin</code> (or whatever your <code>git</code> location) is the last item listed. If it isn&rsquo;t, add a new entry for <code>C:\Program Files\Git\bin</code>.</p><h2 id=clone-the-repository>Clone the repository</h2><p>When you get a new assignment, first click the assignment link &ndash; this will create an initial GitHub repository.</p><p>After opening your GitHub repository, click the green &ldquo;Code&rdquo; button and click the copy icon next to the URL name. This will copy the URL of your GitHub repository:</p><p><a href=#R-image-3fde8e0687df819b41ece00a1b7a4f5e class=lightbox-link><img alt="Clone repo" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/gitHubRepo.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3fde8e0687df819b41ece00a1b7a4f5e><img alt="Clone repo" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/gitHubRepo.png></a></p><p><strong>For labs</strong>, follow the instructions under &ldquo;Organizing Labs&rdquo; in section 0.1 to open your CIS 308 folder in VS Code, create a new lab folder, and change directories to your empty folder.</p><p><strong>For projects</strong>, create an empty folder on your machine, right-click the folder name, and select &ldquo;Open with Code&rdquo;. Then open the Terminal within VS Code by selecting &ldquo;Terminal->New Terminal&rdquo;. The terminal should automatically display the empty folder you just created.</p><p>Clone your GitHub repository to your new, empty folder by typing in the terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>git clone {repository-url} ./</span></span></code></pre></div><p>Where <code>{repository-url}</code> is the URL you copied from your GitHub repository (leave off the <code>{</code> and <code>}</code> when you insert your URL). The <code>./</code> tells git to clone the repository to the current directory.</p><h2 id=add-code-and-test>Add code and test</h2><p>Add the necessary programming files to your project. You can add a file in VS Code by clicking your project name under &ldquo;Explorer&rdquo;, and then clicking the icon labeled &ldquo;New File&rdquo; (it looks a piece of paper with a plus sign). Type the name of your new file and hit Enter to save it:</p><p><a href=#R-image-ddb399af785bef7c0765086c090dcb8d class=lightbox-link><img alt="add file" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/vsCodeAddFile.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ddb399af785bef7c0765086c090dcb8d><img alt="add file" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/vsCodeAddFile.png></a></p><p>Write the code for your project. As you go, save it and test it with the <code>gcc</code> compiler. If it builds, run the resulting executable (either <code>a.exe</code> or <code>a.out</code>). Here is an example of compiling and running a Hello, World! program:</p><p><a href=#R-image-65e773067c17413b7483fbf2689f70e8 class=lightbox-link><img alt="compile run" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/compileRunHello.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-65e773067c17413b7483fbf2689f70e8><img alt="compile run" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/compileRunHello.png></a></p><h2 id=commit-and-push>Commit and push</h2><p>Once you are ready to commit your changes, type the following in the integrated terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>git add .</span></span></code></pre></div><p>This will add all changes to the current commit. Then type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>git commit -m &#34;descriptive message&#34;</span></span></code></pre></div><p>to create a local commit, where &ldquo;descriptive message&rdquo; is replaced with a message describing your changes (you DO need to include the quotations). Finally, push your local commit to the current branch:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>git push</span></span></code></pre></div><p>If you go to your GitHub repository URL, you should see the latest changes.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=compiling-and-running>Compiling and Running</h1><p>After you have installed VS Code along with <code>gcc</code>, you can write C programs in the VS Code editor and then use the integrated terminal to compile and run.</p><h2 id=hello-world-in-vs-code>Hello, World! in VS Code</h2><p>Here is a Hello, World! program written in C using VS Code. It is saved to the file <code>hello.c</code> (note that <code>.c</code> is the extension for C programs):</p><p><a href=#R-image-ac1046dbdeaa059fb8efc355db40b627 class=lightbox-link><img alt="Hello C" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/helloC.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ac1046dbdeaa059fb8efc355db40b627><img alt="Hello C" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/helloC.png></a></p><h2 id=find-code-in-terminal>Find code in terminal</h2><p>To compile and run a C program, make sure the integrated terminal appears below the code in VS Code (as shown above). If it doesn&rsquo;t, select &ldquo;Terminal->New Terminal&rdquo;. This will open a new terminal in your current directory.</p><h3 id=list-directory-contents>List directory contents</h3><p>In the integrated terminal, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ls</span></span></code></pre></div><p>This should list the contents of the current directory, which hopefully includes your <code>hello.c</code> file. If you get an error that <code>ls</code> is unrecognized (which it might be, depending on what kind of terminal you are using), try:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>dir</span></span></code></pre></div><p>instead.</p><h3 id=change-directory>Change directory</h3><p>If you do not see your code file displayed after typing <code>ls</code> or <code>dir</code>, then you are likely not in the folder that contains your code. If your code is contained within a subfolder of the current directory path displayed in the terminal, do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>cd {dir-name}</span></span></code></pre></div><p>where <code>dir-name</code> is the name of a subfolder within the terminal&rsquo;s current directory. (Make sure to leave off the <code>{</code> and <code>}</code> when substiting a directory name.) This will change the terminal&rsquo;s current directory to be: <code>dir-name</code>.</p><p>Alternatively, you may need to back out to the parent folder of the current directory. If you do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>cd ..</span></span></code></pre></div><p>Then the terminal&rsquo;s current directory will update to be its parent folder.</p><h2 id=compile-and-run>Compile and run</h2><p>Once you have found the directory with your code (which was most likely the original terminal directory without having to make any changes), you are ready to compile your code. To compile our <code>hello.c</code> program, we type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc hello.c</span></span></code></pre></div><p>(replacing <code>hello.c</code> with the name of our C program file). If there were no errors, it will generate an executable file. If you type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ls</span></span></code></pre></div><p>(or <code>dir</code>), you should see either <code>a.out</code> or <code>a.exe</code> &ndash; this is the executable file for your program.</p><p>To run your executable, type either:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>./a.out</span></span></code></pre></div><p>or:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>./a.exe</span></span></code></pre></div><p>Depending on the name of your executable file. You should see your program running in the terminal.</p><p>Here is an example of compiling and running our Hello, World! program in the VS Code terminal:</p><p><a href=#R-image-05433bda4572bbc302358fc29c06474d class=lightbox-link><img alt="C compile run" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/compileRunHello.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-05433bda4572bbc302358fc29c06474d><img alt="C compile run" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/compileRunHello.png></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=terminal-commands>Terminal commands</h1><p>A side goal of this class is for students to become more comfortable with using the terminal. With practice, you will find that you are faster at navigating folders, creating files/folders, compiling/running programs, using tools stuch as git, etc. using the terminal than you are using a GUI. Familiarity with a terminal is especially useful in system administration and web development.</p><h2 id=summary-of-common-terminal-commands>Summary of common terminal commands</h2><p>Here is a summary table of the most common terminal commands for this course:</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>dir</td><td>Lists the current directory contents (only available in Windows)</td></tr><tr><td>ls</td><td>Lists the current directory contents (not available in Windows command prompt)</td></tr><tr><td>cd dirName</td><td>Changes the current directory in the terminal to be <code>dirName</code>. (Note: dirName must be a subfolder of the current directory.)</td></tr><tr><td>mkdir dirName</td><td>Makes a new, empty directory called <code>dirName</code></td></tr><tr><td>ni fileName</td><td>Creates a new, empty file called <code>fileName</code>. We can do <code>ni prog.c</code> to create a new C program called <code>prog.c</code> (only available in Windows)</td></tr><tr><td>touch fileName</td><td>Creates a new, empty file called fileName. We can do <code>touch prog.c</code> to create a new C program called <code>prog.c</code> (only available in Mac/Linux/Unix)</td></tr><tr><td>cd ..</td><td>Updates the current directory in the terminal to be its parent directory. For example, if the current directory is <code>C:\Users\Julie</code>, then <code>cd ..</code> makes the current directory be <code>C:\Users</code></td></tr><tr><td>del fileName</td><td>Deletes the file called <code>fileName</code>, which must be in the current directory (only available in Windows)</td></tr><tr><td>rm fileName</td><td>Deletes the file called <code>fileName</code>, which must be in the current directory (only available in Mac/Linux/Unix)</td></tr></tbody></table><h2 id=other-terminal-tips>Other terminal tips</h2><p>When you are typing a directory name or file name in the terminal, you can type a few letters and hit <em>Tab</em> &ndash; the terminal will attempt to autocomplete the rest of the name.</p><p>To recall a command you recently typed in the terminal, you can use the up or down arrows. This saves you from typing the same commands over and over.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=debugging-c-programs>Debugging C programs</h1><p><code>gdb</code> is the C debugger. It allows you to create an executable specifically for debugging purposes.</p><h2 id=getting-gdb>Getting gdb</h2><p>First, ensure that you have gdb installed.</p><h3 id=gdb-on-windows>gdb on Windows</h3><p>Type in a terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gdb --version</span></span></code></pre></div><p>If you see a version number, then you already have gdb installed. If you see an error that gdb is unrecognized, you will need to install it. Launch a MSYS2 prompt (Windows icon->type MSYS2) and then type the following in MSYS2:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pacman -S mingw-w64-x86_64-gdb</span></span></code></pre></div><p>This should install gdb. Next, you will need to add the <code>gdb.exe</code> location to your Path. It may be in the same location as <code>gcc</code>, which for me is <code>C:\msys64\mingw64\bin</code>, but it may be in a different location. The <code>gdb.exe</code> file should be in a <code>\bin</code> folder somewhere within the <code>C:\msys64</code> folder - you may need to search for it. Copy the address where you find the <code>gdb.exe</code> file.</p><p>Next, add the location of your <code>gdb.exe</code> file to your Path (if it is a different location than your <code>gcc.exe</code> file). Click Start, type <em>Environment variables</em>, and select &ldquo;Edit the system environment variables&rdquo;). Click &ldquo;Environment Variables..&rdquo;, then find Path under System variables and click &ldquo;Edit&mldr;&rdquo;. Look to see if the location of your <code>gdb.exe</code> file is already listed &ndash; if it is, you don&rsquo;t need to add anything. If it&rsquo;s not, click &ldquo;New&rdquo;, paste in the address you copied in the previous step, and click OK three times to dismiss each frame.</p><h3 id=gdb-on-mac>gdb on Mac</h3><p>I recommend following <a href=https://dev.to/jasonelwood/setup-gdb-on-macos-in-2020-489k rel=external target=_blank>this tutorial</a> to get <code>gdb</code> on your machine.</p><h2 id=first-tutorial>First tutorial</h2><p>Suppose we have the following program, <code>test.c</code>. This program is supposed to multiply together the numbers 1 * 2 * 3 * 4 * 5, but it has some problems:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kt>int</span> <span class=n>prod</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        <span class=n>prod</span> <span class=o>=</span> <span class=n>prod</span> <span class=o>*</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Product is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>prod</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span></span></span></code></pre></div><p>First, build an executable with debugging information:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc -g test.c -o debug</span></span></code></pre></div><p>This will create the executable <code>debug</code>. You can run <code>gdb</code> on <code>debug</code> as follows (this will launch <code>gdb</code>, but will not yet start running your program):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gdb debug</span></span></code></pre></div><p>You will see something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>GNU gdb (GDB) 12.1
</span></span><span class=line><span class=cl>Copyright (C) 2022 Free Software Foundation, Inc.
</span></span><span class=line><span class=cl>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
</span></span><span class=line><span class=cl>This is free software: you are free to change and redistribute it.
</span></span><span class=line><span class=cl>There is NO WARRANTY, to the extent permitted by law.
</span></span><span class=line><span class=cl>Type &#34;show copying&#34; and &#34;show warranty&#34; for details.
</span></span><span class=line><span class=cl>This GDB was configured as &#34;x86_64-w64-mingw32&#34;.
</span></span><span class=line><span class=cl>Type &#34;show configuration&#34; for configuration details.
</span></span><span class=line><span class=cl>For bug reporting instructions, please see:
</span></span><span class=line><span class=cl>&lt;https://www.gnu.org/software/gdb/bugs/&gt;.
</span></span><span class=line><span class=cl>Find the GDB manual and other documentation resources online at:
</span></span><span class=line><span class=cl>    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>For help, type &#34;help&#34;.
</span></span><span class=line><span class=cl>Type &#34;apropos word&#34; to search for commands related to &#34;word&#34;...
</span></span><span class=line><span class=cl>Reading symbols from debug...
</span></span><span class=line><span class=cl>(gdb)</span></span></code></pre></div><p>That last <code>(gdb)</code> at the end is the debugging prompt.</p><p>Before you execute your program in the debugger, you&rsquo;ll want to set a breakpoint (or several). For example, suppose we want to set a breakpoint at the start of the <code>main</code> function. Then we can type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>break main</span></span></code></pre></div><p>(We could have also typed <code>break 3</code>, which sets a breakpoint on line 3 &ndash; which is the beginning of the main function.) You can add more than one breakpoint in this way.</p><p>When we have added our breakpoint(s) and are ready to run our program with debugging, we type at the debugging prompt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>run</span></span></code></pre></div><p>(If our program accepts command-line arguments, we include them after the <code>run</code> command.) We see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Starting program: C:\...\debug.exe 
</span></span><span class=line><span class=cl>[New Thread 9144.0x47d8]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Thread 1 hit Breakpoint 1, main () at test.c:4
</span></span><span class=line><span class=cl>4           int prod = 0;</span></span></code></pre></div><p>Which tells us that our program has stopped at our breakpoint just before executing line 4 (which is the first statement that performs an operation in our main function). From here, we can graphically view the current line in the program by typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>layout src</span></span></code></pre></div><p>In this example, we will see:</p><p><a href=#R-image-09ea65a0772e85a24012ade9153ab301 class=lightbox-link><img alt=debugger class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/debug.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-09ea65a0772e85a24012ade9153ab301><img alt=debugger class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/debug.png></a></p><p>Notice that the line that will be executed next (line 4, where we declare and initialized <code>prod</code>) is highlighted. We can also see our main function breakpoint indicated with a <code>B+</code>. To step line by line through the code, we can use the <code>next</code> command. If we now do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>next</span></span></code></pre></div><p>Then our layout view will highlight the next line in the program (the for loop), like this:</p><p><a href=#R-image-e7f6b6d482b6bdb9c661531b0fe3ecf6 class=lightbox-link><img alt="next statement" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/nextDebug.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e7f6b6d482b6bdb9c661531b0fe3ecf6><img alt="next statement" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/nextDebug.png></a></p><p>We can also examine the values of different variables. If we enter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>next
</span></span><span class=line><span class=cl>print i</span></span></code></pre></div><p>We will see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$3 = 1</span></span></code></pre></div><p>Which tells us that <code>i</code> is currently 1. If we do <code>next</code> again (thus executing the <code>prod = prod * i</code> statement) and then do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>print prod</span></span></code></pre></div><p>We see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$4 = 0</span></span></code></pre></div><p>Which tells us that <code>prod</code> is still 0, even after multiplying on the first value of <code>i</code>. We can likely already see the first bug &ndash; <code>prod</code> should have been initialized to 1 instead of 0.</p><p>We can continuing stepping though the lines of code, printing values as we go. When we step to the end of the for loop, we may realize that we never multiply <code>prod</code> by 5 &ndash; and we can see that this is because our for loop condition (<code>i &lt; 5</code>) does not include an iteration when <code>i</code> is 5.</p><h2 id=invalid-memory-access>Invalid memory access</h2><p>As another example, suppose we have this C program (test.c):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kt>int</span> <span class=n>arr</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>arr</span><span class=p>[</span><span class=mi>100000</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;X is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If we build our program as usual (<code>gcc test.c</code>) and then run the executable (<code>./a.exe</code>) WITHOUT any debugging, we will likely see nothing at all. It appears as if our program mysteriously never makes it to the print statement.</p><p>On the other hand, if we build our program for debugging (<code>gcc -g test.c -o debug</code>) and then run it in the debugger (<code>gdb debug</code>), we can get more information. In gdb, we might first set a breakpoint at our print statement:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>b 8</span></span></code></pre></div><p>And then run the program until it hits our breakpoint:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>run</span></span></code></pre></div><p>We will see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Starting program: C:\...\debug.exe 
</span></span><span class=line><span class=cl>[New Thread 17448.0x425c]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Thread 1 received signal SIGSEGV, Segmentation fault.
</span></span><span class=line><span class=cl>main () at test.c:6
</span></span><span class=line><span class=cl>6           int x = arr[100000];</span></span></code></pre></div><p>Which tells us that our program had a segmentation fault on line 6. A <em>segmentation fault</em> means we are trying to access memory that does not belong to us, which is very clear in this example &ndash; our array only has 10 spots, but we&rsquo;re trying to access spot 100000. Now we can see where we went wrong in our program. (This was a trivial example, but a similar approach is a great way to debug a program that is not producing any output. Most likely such a program is crashing with a segmentation fault, but without the debugger we have no way of knowing where the program crashed.)</p><h2 id=debugging-recursive-functions>Debugging recursive functions</h2><p>As a final example, suppose we have this C program in test.c:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kt>int</span> <span class=nf>factorial</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>*</span> <span class=nf>factorial</span><span class=p>(</span><span class=n>x</span><span class=o>-</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=nf>factorial</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Factorial of 2 is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If we build and run this program as usual, it will just hang &ndash; suggesting an infinite loop or infinite recursion. (You can kill a program in the terminal with Ctrl-C.) To find the problem, we can build our program with debugging information and run it with gdb. We might set a breakpoint at the factorial function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>b factorial</span></span></code></pre></div><p>And then:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>run</span></span></code></pre></div><p>It will pause on line 4 in the first call of the factorial function. We can view the program stack up to this point by typing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>bt</span></span></code></pre></div><p>We will see the current program stack:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#0  factorial (x=2) at test.c:4
</span></span><span class=line><span class=cl>#1  0x00007ff6956015ba in main () at test.c:8</span></span></code></pre></div><p>Which shows us that the main function called the factorial function with parameter <code>x = 2</code>. If we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>s</span></span></code></pre></div><p>To step INTO the recursive function call, our program will pause again on line 4 in the next call to factorial. If we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>bt</span></span></code></pre></div><p>again, we will see the program stack:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#0  factorial (x=1) at test.c:4
</span></span><span class=line><span class=cl>#1  0x00007ff695601599 in factorial (x=2) at test.c:4
</span></span><span class=line><span class=cl>#2  0x00007ff6956015ba in main () at test.c:8</span></span></code></pre></div><p>Which shows us that our program started in main, then called factorial with parameter <code>x=2</code>, then called factorial again with <code>x=1</code>. Suppose we type <code>s</code> two more times, and then try <code>bt</code> again. We would then see:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>factorial (x=-1) at test.c:4
</span></span><span class=line><span class=cl>#1  0x00007ff695601599 in factorial (x=0) at test.c:4
</span></span><span class=line><span class=cl>#2  0x00007ff695601599 in factorial (x=1) at test.c:4
</span></span><span class=line><span class=cl>#3  0x00007ff695601599 in factorial (x=2) at test.c:4
</span></span><span class=line><span class=cl>#4  0x00007ff6956015ba in main () at test.c:8</span></span></code></pre></div><p>Now we can see that we made a recursive call with a parameter of -1, which is clearly incorrect. This can help us identify our error &ndash; we forgot to include a base case.</p><h2 id=summary-of-gdb-commands>Summary of gdb commands</h2><p>Here is a summary table of the most common gdb commands:</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>break lineNumber</code> (or <code>b lineNumber</code>)</td><td>Sets a breakpoint at the given line number. You can add breakpoints at any point &ndash; either before running the program in the debugger or in the middle of a debugging session.</td></tr><tr><td><code>break functionName</code> (or <code>b functioNname</code>)</td><td>Sets a breakpoint at the given function name</td></tr><tr><td><code>run</code> (or <code>r</code>)</td><td>Executes your program from the beginning, and lets it run until it hits your first breakpoint</td></tr><tr><td><code>layout src</code></td><td>Displays a graphical view of your code and highlights the line that will be executed next</td></tr><tr><td><code>continue</code> (or <code>c</code>)</td><td>Runs your program from its current point of execution until it hits the next breakpoint</td></tr><tr><td><code>print variableName</code> (or <code>p variableName</code>)</td><td>Prints the current value of the given variable</td></tr><tr><td><code>print expression</code> (or <code>p expression</code>)</td><td>Prints the result of the given expression using current variable values. For example, <code>print *ptr</code> would print the current value at the memory location held in <code>ptr</code>. Similarly, <code>print arr[2]+10</code> would print 10 more than the element at position 2 in the <code>arr</code> array.</td></tr><tr><td><code>next</code> (or <code>n</code>)</td><td>Steps to the next line in the program. If the next line is a function call, it steps OVER it (and does not go into the function).</td></tr><tr><td><code>step</code> (or <code>s</code>)</td><td>Steps to the next line in the program. If the next line is a function call, it steps INTO that function.</td></tr><tr><td><code>disable breakPoint</code></td><td>Disables an existing breakpoint, where <code>breakPoint</code> is either a line number or a function name</td></tr><tr><td><code>enable breakPoint</code></td><td>Enables an existing breakpoint, where <code>breakPoint</code> is either a line number or a function name</td></tr><tr><td><code>list</code> (or <code>l</code>)</td><td>Prints the 10 lines of source code around the current line in the debugger</td></tr><tr><td><code>bt</code></td><td>Prints the stack trace leading to the current point of execution</td></tr><tr><td><code>kill</code></td><td>Kills the program being run in the debugger</td></tr><tr><td><code>quit</code></td><td>Exits gdb</td></tr></tbody></table><h2 id=visualizing-program-memory>Visualizing program memory</h2><p>I recommend using <a href="https://pythontutor.com/visualize.html#mode=edit" rel=external target=_blank>Python Tutor</a> with C/gcc selected as another tool for debugging. You can paste your C program into the text area and choose &ldquo;Visualize Execution&rdquo;. Then you can step line by line through your program. The site shows what memory is allocated on the stack and what is allocated on the heap, and shows how different variables are updated as you progress. It is especially useful for visualizing pointers. The only drawback is that it will only work on programs with no user/file input &ndash; but you could always hardcode any input values for debugging purposes.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=remote-access>Remote Access</h1><p>In the case that you are unable (or uninterested) to install some of the C tools on your own machine (such as <code>gcc</code>, <code>gdb</code>, or <code>make</code>), you can install the <em>Remote - SSH extension</em> in VS Code. This will allow you to remotely connect to the CS Linux server, which already has all the C tools installed. You will be able to use VS Code to edit files that are stored on your CS department U: drive the same way that you would edit local files.</p><h2 id=getting-the-remote---ssh-extension>Getting the Remote - SSH extension</h2><p>In VS Code, find the <em>extensions</em> icon on the left hand side (it looks like four squares with one corner pulled away). Search for <em>remote</em> and find <em>Remote - SSH</em> (the current version is v0.90.1, but install the latest version if you see a newer version number). Click <em>Install</em>.</p><p>You should now see the <em>remote explorer</em> icon on the left bar in VS code, like this:</p><p><a href=#R-image-0f3cacbf502c19359f9eb148c0d72646 class=lightbox-link><img alt="remote explorer" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/remoteExplorer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0f3cacbf502c19359f9eb148c0d72646><img alt="remote explorer" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/remoteExplorer.png></a></p><h2 id=k-state-vpn>K-State VPN</h2><p>If you are off-campus, you will need to connect to the VPN used by K-State (GlobalProtect) before you can make a remote connection. If you already have GlobalProtect installed, connect to it. If you don&rsquo;t, go <a href=https://www.k-state.edu/it/cybersecurity/vpn/ rel=external target=_blank>here</a> for installation links.</p><p>If you are on-campus (and on a K-State network connection), you do not need to connect to a VPN.</p><h2 id=connecting-to-cs-linux>Connecting to CS Linux</h2><p>To connect to CS Linux, click the remote explorer icon here:</p><p><a href=#R-image-7499cc04af278d46cdac241647db1780 class=lightbox-link><img alt="remote explorer" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/remoteExplorer.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-7499cc04af278d46cdac241647db1780><img alt="remote explorer" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/remoteExplorer.png></a></p><p>If this is your first time making a remote connection, you will see this page:</p><p><a href=#R-image-be3a01bd0f566f53a32d28b62809b0a7 class=lightbox-link><img alt="ssh targets" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/sshTargets.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be3a01bd0f566f53a32d28b62809b0a7><img alt="ssh targets" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/sshTargets.png></a></p><p>When you hover over <em>SSH Targets</em>, you should see a plus (+) icon that says &ldquo;Add New&rdquo; (as shown above). Click it. You will see a prompt that says: *Enter SSH Connection Command". Type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>ssh eID@cslinux.cs.ksu.edu</span></span></code></pre></div><p>where <code>eID</code> is your eID. Press Enter to connect.</p><p>It may ask you to set up an SSH client, if one isn&rsquo;t already installed. If so, go <a href=https://code.visualstudio.com/docs/remote/troubleshooting#_installing-a-supported-ssh-client rel=external target=_blank>here</a> for SSH client installation information.</p><p>If an SSH client is already installed, it will ask you to select an SSh configuration file. Select one from the menu. At this point, you should see <code>cslinux.cs.ksu.edu</code> under <em>SSH Targets</em>. Hover over the <code>cslinux.cs.ksu.edu</code> name and select <em>Connect to Host in New Window</em>:</p><p><a href=#R-image-81a03f9a5f2299ab4bde2223ebf0d437 class=lightbox-link><img alt="ssh connect" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/connect.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-81a03f9a5f2299ab4bde2223ebf0d437><img alt="ssh connect" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/connect.png></a></p><p>Select &ldquo;Linux&rdquo; as the platform:</p><p><a href=#R-image-29a00e1d75ae734a4493fe86fcfb5716 class=lightbox-link><img alt=Linux class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/linux.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-29a00e1d75ae734a4493fe86fcfb5716><img alt=Linux class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/linux.png></a></p><p>Click <em>Continue</em> when prompted, and then enter your CS password (NOT your eID password) to login. You should see:</p><p><a href=#R-image-84deecc956656221eac336544879bf49 class=lightbox-link><img alt="logged in" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/loggedin.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-84deecc956656221eac336544879bf49><img alt="logged in" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/loggedin.png></a></p><p>Click <em>Open Folder</em>, and navigate to a folder on your department U: drive. If you are prompted to log in again, do so. You should see the folder on the left side and a Linux terminal in the same directory on the bottom. You can also open files in that directory the same way you might with local files. For example, I might see:</p><p><a href=#R-image-0683ee0c7cc66a3f33aa94e65aa222bb class=lightbox-link><img alt=display class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/displayLinux.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0683ee0c7cc66a3f33aa94e65aa222bb><img alt=display class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/displayLinux.png></a></p><p>From there, you can use <code>gcc</code>, <code>gdb</code>, or <code>make</code> to compile, debug, or build your projects.</p><p>Once you are done with your connection, close the connection by going to <em>File->Close Remote Connection</em> (you might need to scroll down in the menu).</p><p>The next time you click *Remote Explorer" to connect to CS Linux, you should see <code>cslinux.cs.ksu.edu</code> already listed under <code>SSH targets</code>.</p><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 1</div><h1 id=c-basics>C Basics</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of C Basics</h1><article class=default><header class=headline></header><h1 id=hello-world>Hello, World</h1><p>The first program students write in any new language is the &ldquo;Hello, World&rdquo;
program. Here’s how it looks in C:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Hello, World!</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>To write and run this program see the Tools Guide in section 0.1 for more information. It should print &ldquo;Hello, World!&rdquo; to the console.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=variables>Variables</h1><h2 id=declaring-variables>Declaring Variables</h2><p>Variables in C are declared exactly like variables in Java or C#. Just say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type name;</span></span></code></pre></div><p>where <code>type</code> is the type of the variable, and <code>name</code> is its name. The most common types in C are:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=kt>double</span>
</span></span><span class=line><span class=cl><span class=kt>float</span>
</span></span><span class=line><span class=cl><span class=kt>char</span></span></span></code></pre></div><p>Notice that C does not have a boolean type or a string type. Some examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>val</span><span class=p>;</span></span></span></code></pre></div><h2 id=initializing-variables>Initializing Variables</h2><p>To initialize:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>name = value;</span></span></code></pre></div><p>Where <code>name</code> is the name of the variable, and <code>value</code> is the value you want to store in it. You can also do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type name = value;</span></span></code></pre></div><p>to declare and initialize all on one line. Some examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=err>‘</span><span class=n>A</span><span class=err>’</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>val</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>num</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>val</span> <span class=o>=</span> <span class=mf>4.7</span><span class=p>;</span></span></span></code></pre></div><p>The values of uninitialized variables in C are undefined. Some compilers <em>may</em> give default variables to such variables, but such behavior is not guaranteed. Other copmilers will do nothing, which will cause these uninitialized variables to <strong>hold whatever garbage value was left in the memory spot reserved for the variable.</strong> (usually a really big or really negative integer). In Java or C#, if you try to use a variable that has not been initialized, you will get a compiler error. The C compiler will NOT complain – it will just use whatever undefined value the variable happens to have.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>;</span> <span class=c1>//holds some garbage value, say 13145687
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>num</span> <span class=o>=</span> <span class=n>num</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span> <span class=c1>//compiler error in Java – num not initialized
</span></span></span><span class=line><span class=cl><span class=c1>//in C, num now has the value 13145688
</span></span></span></code></pre></div><p>You will find that C is far more lenient in compilation than Java or C#. Remember that just because your program compiles doesn’t mean that it’s right!</p><h2 id=where-to-declare>Where to Declare</h2><p>There are probably a hundred different versions of C compilers. Consequently, a program may compile with one compiler (say, on cslinux) but not compile on another (such as when using Visual Studio .NET). Certain compilers require that variables only be initialized at the beginning of a block
(a block begins when a brace { is opened). Because some compilers have this
requirement, we will uphold this custom in our programs. For example, the following is fine:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>double</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=sc>&#39;T&#39;</span><span class=p>;</span> <span class=c1>//all declarations are together
</span></span></span><span class=line><span class=cl><span class=c1></span>				  <span class=c1>//at the beginning of the block
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>a</span> <span class=o>=</span> <span class=mf>7.2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>But this is not:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>double</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=mf>7.2</span><span class=p>;</span> 		<span class=c1>//code begins – this is not a declaration
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>char</span> <span class=n>b</span> <span class=o>=</span> <span class=sc>&#39;T&#39;</span><span class=p>;</span> 	<span class=c1>//b is declared AFTER the code begins
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><h2 id=operations>Operations</h2><p>Mathematical operations in C work exactly like mathematical operations in Java or C#. You can use +, -, *, /, and %. You can also use things like ++ and +=.</p><p>Casting in C is also the same as casting in Java or C#:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>d</span> <span class=o>=</span> <span class=p>(</span><span class=kt>double</span><span class=p>)</span> <span class=n>num</span><span class=p>;</span> <span class=c1>//casts num to a double, d is now 7.0
</span></span></span></code></pre></div><h2 id=simulating-booleans>Simulating Booleans</h2><p>As was mentioned, there is no boolean type in C. Instead, ints are used to
simulate booleans. In this simulation, 0 means false, and anything else means
true. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>flag</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>//flag is false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>flag</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span> <span class=c1>//flag is true
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=printing>Printing</h1><h2 id=printf-function><em>printf</em> Function</h2><p>As you&rsquo;ve seen, the <code>printf</code> function is used to display output in C. For example, to display a string of text:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Hello</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span></span></span></code></pre></div><p>Note that you always need to specify the newline character (\n). There is
no <em>println</em> equivalent in C.</p><h2 id=printing-variables>Printing Variables</h2><p>Printing variables works a bit differently. First, you specify the kind of variable that&rsquo;s going to be printed (called a control string). Then, outside the string, you give the corresponding variable name.</p><p>Here are the different control strings:</p><table><thead><tr><th>Type</th><th>Control String</th></tr></thead><tbody><tr><td>int</td><td>%d</td></tr><tr><td>double</td><td>%lf</td></tr><tr><td>float</td><td>%f</td></tr><tr><td>char</td><td>%c</td></tr><tr><td>char* (string)</td><td>%s (see String section)</td></tr></tbody></table><p>It&rsquo;s easiest to see an example to figure out how printing works. Here&rsquo;s how to print the value of an integer to the screen:</p><pre><code>int num = 4;
printf(&quot;The value of num is %d\n&quot;, num);
</code></pre><p>Notice that where we want to print a variable, we put the control string
(<code>%d</code> for int). After we&rsquo;ve listed the entire string, we put the corresponding variable names as the next arguments to <code>printf</code>. The above example will print:</p><pre><code>&quot;The value of num is 4&quot; 
</code></pre><p>to the screen.</p><p>We can also print several variables at once:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>letter</span> <span class=o>=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>val</span> <span class=o>=</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span> <span class=n>letter</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The ASCII value of %c is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>letter</span><span class=p>,</span> <span class=n>val</span><span class=p>);</span></span></span></code></pre></div><p>This prints:</p><pre><code>&quot;The ASCII value of A is 65&quot;
</code></pre><p>to the screen. Notice that the <code>%c</code> corresponds to the <code>letter</code> argument, and the <code>%d</code> corresponds to the <code>val</code> argument.</p><h2 id=formatting>Formatting</h2><p>The <code>printf</code> function also allows you some control over formatting your output. For example, if you want a value to take up exactly 6 spaces (padded with space characters on the left, if necessary), put a 6 between the % and the control string character.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The value of num is %6d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>num</span><span class=p>);</span></span></span></code></pre></div><p>This will print:</p><pre><code>&quot;The value of num is 4&quot; 
</code></pre><p>to the screen (note the padding on the left of the 4).</p><p>You can also only display a certain number of digits for decimal numbers. For
example, put a .2 in between the % and the control string character to only display two decimal places.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>double</span> <span class=n>val</span> <span class=o>=</span> <span class=mf>3.14159</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Pi is %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>val</span><span class=p>);</span></span></span></code></pre></div><p>This will display:</p><pre><code>&quot;Pi is 3.14&quot; 
</code></pre><p>You can specify both the width of the output (for example, six spaces) and the number of decimals to display by doing something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>double</span> <span class=n>val</span> <span class=o>=</span> <span class=mf>3.14159</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Pi is %6.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>val</span><span class=p>);</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=user-input>User Input</h1><p>User input in C is, in short, a pain. There are three major input functions:
<code>getchar()</code>, <code>scanf(...)</code>, and <code>fgets(...)</code>. To use any of these functions, you must include the <code>stdio.h</code> library.</p><h2 id=getchar><code>getchar()</code></h2><p>The <code>getchar()</code> function takes no arguments and returns the very next character in the standard input stream. If there are no more characters in the input stream, it returns the constant <code>EOF</code>.</p><p>Here&rsquo;s an example that reads a student&rsquo;s letter grade and then prints it back to the console.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>grade</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter your grade: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>grade</span> <span class=o>=</span> <span class=nf>getchar</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Your grade is %c</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>grade</span><span class=p>);</span></span></span></code></pre></div><p>Note that if you are using <code>getchar</code> to read characters one at a time from standard input, you will NEVEr reach <code>EOF</code> &ndash; instead, the program will wait for you to type new input. If you have piped the contents of a file to be the input stream for the program, though, <code>getchar</code> will return <code>EOF</code> when you have reached the end of that file. If you want to use <code>getchar</code> to read all characters from standard input, a better check is to read until you reach <code>\n</code> (which would signify the user pressing Enter after supplying user input).</p><h2 id=scanf><code>scanf(...)</code></h2><p>The <code>scanf(...)</code> function allows us to read formatted input, like ints and
doubles.</p><p>The first argument to <code>scanf</code> is the format string, which specifies the kind of data you expect to read. To specify the data types you expect, use the same control string characters you used for printf &ndash; %d, %f, %lf, %c, and %s. If you want to read an int, the first argument to scanf should be &ldquo;%d&rdquo;. If you want to read two ints, put &ldquo;%d %d&rdquo;.</p><p>The next arguments to <code>scanf</code> are the corresponding variables that you want to store the input in. We won&rsquo;t go into details now, but <code>scanf</code> needs the memory address of these variables so it can modify their value. To get the address of a variable, put a & in front of the variable name.</p><p>Here&rsquo;s a simple example that prompts the user for an integer, and then reads in the value:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=c1>//%d: we&#39;re reading in an integer
</span></span></span><span class=line><span class=cl><span class=c1>//&amp;num: we&#39;re storing that integer in the num variable
</span></span></span></code></pre></div><p>Here&rsquo;s an example that reads in an integer and a double:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>num1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>num2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter an int and a double: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d %lf&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num2</span><span class=p>);</span></span></span></code></pre></div><p>The first number typed will get stored in <code>num1</code>, and the second number will get stored in <code>num2</code>. Our format string specified that these numbers should be separated by a space, but they can be separated by any amount of whitespace (multiple spaces, tabs, or newlines).</p><p>Suppose that the user is entering a fraction, like 9/5. Here&rsquo;s how we could read in that information:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>numerator</span><span class=p>,</span> <span class=n>denominator</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a fraction (like 9/5): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d/%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>numerator</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>denominator</span><span class=p>);</span></span></span></code></pre></div><p>By putting the &ldquo;/&rdquo; in the format string, we specify that we expect the input to have a / there, but we don&rsquo;t wish to store it in a variable.</p><p><code>scanf</code> returns the number of variables that were correctly read in.</p><p>Here is an (incomplete) list of subtleties when using <code>scanf</code>:</p><ul><li>In most cases, <code>scanf</code> skips whitespace. However, if you type a space (or tab or newline) where <code>scanf</code> expects a character,
it will read the whitespace into your <code>char</code> variable.</li><li>If you use <code>scanf</code> to read a single character, then the user will type an input character and then hit return. <code>scanf</code> will read the input character, but
the newline will remain in the input buffer. This can cause problems if you
call <code>scanf</code> a second time – the newline character will then be read, and not
any new input. To fix this problem, add a call to <code>getchar()</code> after reading
a char to read the extra newline character.</li><li>If <code>scanf</code> reads input that it does not expect (for example, if it sees a
character but is supposed to be reading an int), it will not discard the bad
input. The bad input will still be in the input buffer if you
call <code>scanf</code> again. To fix this, call <code>getchar()</code> until you reach <code>\n</code>. This
will clear the input buffer.</li></ul><p>In the next chapter, we will see that <code>scanf</code> can be very dangerous to use when reading strings from user input. In short, if the user enters a string that is longer than expected, <code>scanf</code> can accidentally overwrite other parts of memory. This can even be exploited using a <em>buffer overflow attack</em> by tricking <code>scanf</code> into reading in program instructions.</p><p>When we reach the section on strings (2.2), we will learn about the <code>fgets</code> function, which is a safer option for reading strings from both standard input and files.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=selection-structures>Selection Structures</h1><p>C has if-statements and switch statements that work just like those in Jav and C#.</p><p>Here is a sample if-statement:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>//initialize age
</span></span></span><span class=line><span class=cl><span class=c1>//print either Child, Teenager, or Adult, depending on age
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>&lt;</span> <span class=mi>11</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Child</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>&lt;</span> <span class=mi>18</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Teenager</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Adult</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span></span></span></code></pre></div><p>Here is a sample switch statement. The expression in the switch clause must evaluate to either a character or an integer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>grade</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter your grade: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>grade</span> <span class=o>=</span> <span class=nf>getchar</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nf>getchar</span><span class=p>();</span> <span class=c1>//read and discard newline character
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>switch</span> <span class=p>(</span><span class=n>grade</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=sc>&#39;A&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Excellent</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=sc>&#39;B&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Good</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=sc>&#39;C&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Average</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=sc>&#39;D&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Poor</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=sc>&#39;F&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Failing</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Invalid grade</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=loops>Loops</h1><p>There are three kinds of loops in C – while, do-while, and for. Their syntax is exactly the same as loops in Java and C#.</p><h2 id=while-loop>While Loop</h2><p>The code in a while loop executes repeatedly until a specified condition becomes false. If the condition is false before the first execution of the loop, then the entire loop will be skipped.</p><p>This example will read and print every character typed by the user (up until they press enter):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=sc>&#39; &#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Type some text: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=n>c</span> <span class=o>!=</span> <span class=sc>&#39;\n&#39;</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>c</span> <span class=o>=</span> <span class=nf>getchar</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%c</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>c</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=do-while-loop>Do-While Loop</h2><p>Like a while loop, the code in a do-while loop executes repeatedly until a specified condition becomes false. However, the condition in a do-while loop is not checked until after the first iteration of a loop. So, a do-while loop always executes at least once.</p><p>Here&rsquo;s the same example using a do-while loop:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>c</span><span class=p>;</span><span class=n>s</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Type some text: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>do</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>c</span> <span class=o>=</span> <span class=nf>getchar</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%c</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>c</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>while</span> <span class=p>(</span><span class=n>c</span> <span class=o>!=</span> <span class=sc>&#39;\n&#39;</span><span class=p>);</span></span></span></code></pre></div><p>Notice that we don&rsquo;t have to give <code>c</code> a dummy initial value, as we did in the while loop. However, the loop will print the newline character from the user input in its last iteration.</p><h2 id=for-loop>For-Loop</h2><p>The syntax of a for-loop is just like it is in other languages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>for (initialization; condition; update) 
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>	//code
</span></span><span class=line><span class=cl>}</span></span></code></pre></div><p>The only caveat is that the loop variable should not be declared in the initialization section (like <code>int i = 0</code>), and should instead be declared at the beginning of a block (an opening { ). If you forget, your code may compile for you, but it won&rsquo;t necessarily compile elsewhere.</p><p>Here&rsquo;s an example that adds together 10 numbers entered by the user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter an integer: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>sum</span> <span class=o>+=</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Sum is: %d&#34;</span><span class=err>\</span><span class=n>n</span><span class=s>&#34;, sum);</span></span></span></code></pre></div><h2 id=break>Break</h2><p>The <code>break</code> statement immediately stops execution of a loop. For example, this code allows us to get and print 10 numbers, unless the user types a 0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;You entered %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=continue>Continue</h2><p>The <code>continue</code> statement skips the remaining code inside the loop, and continues with the next iteration. For example, this code allows us to add together 10 numbers inputted by the user, except any numbers that are negative:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>num</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span> <span class=k>continue</span><span class=p>;</span> <span class=c1>//Won&#39;t add num to sum
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>sum</span><span class=o>+=</span><span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The sum of the positive numbers is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>sum</span><span class=p>);</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=functions>Functions</h1><p>Functions in C are very similar to methods in other languages, except functions are not associated with any class. (They are like static methods in Java and C#.) They take a number of parameters, perform on operation on those parameters, and may or may not return a value.</p><h2 id=function-prototypes>Function Prototypes</h2><p>Some C compilers will complain if they see a call to a function before they’ve seen the function itself. To avoid this problem, it’s best to include a prototype for a function at the top of the file, and then to implement it someplace else in the file.</p><p>A <em>prototype</em> lists the name, return type, and parameters for a function – but it does not implement the function. Here’s an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=n>num1</span><span class=p>,</span> <span class=kt>int</span> <span class=n>num2</span><span class=p>);</span></span></span></code></pre></div><p>We list the return type (<code>int</code>), the function name (<code>max</code>), and the parameters with their types (<code>int num1</code> and <code>int num2</code>). This is a prototype, so we don’t implement the function here. Instead, we end it with a semi-colon. (Note that this already looks very similar to other languages – the only difference is that C functions are not associated with classes, so they don&rsquo;t need a visibility modifier like <code>private</code> or <code>public</code>.)</p><p>Return types can be any valid type (like <code>char</code>, <code>int</code>, <code>double</code>, etc.). If the function does not return a value, its return type should be <code>void</code>.</p><p>In a prototype, you don’t have to list the names of the parameters – you just need to list the types. For example, this would also be a valid prototype for the <code>max</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span></span></span></code></pre></div><p>If you are writing a prototype for a function that takes no parameters, you can leave the parameter list blank, like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>getNum</span><span class=p>();</span></span></span></code></pre></div><p>However, a better way would be to put <code>void</code> in the parameter list, like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>getNum</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span></span></span></code></pre></div><p>When the compiler sees a blank parameter list in the prototype, it will allow ANY parameter list in the function implementation. However, if it sees <code>void</code> in the prototype’s parameter list, then the implementation must also have a <code>void</code> parameter list.</p><h2 id=function-implementations>Function Implementations</h2><p>A function implementation starts off the same as a prototype. Instead of ending with a semi-colon, it includes the code for the function in brackets { }.</p><p>Here’s the implementation of the <code>max</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=n>num1</span><span class=p>,</span> <span class=kt>int</span> <span class=n>num2</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>num1</span> <span class=o>&gt;=</span> <span class=n>num2</span><span class=p>)</span> <span class=k>return</span> <span class=n>num1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>else</span> <span class=k>return</span> <span class=n>num2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Like in other languages, if a C function has a non-void return type, it must include a <em>return statement</em> that returns a value of the designated type.</p><h2 id=calling-functions>Calling Functions</h2><p>For now, all our programs are in one file, so calling functions is pretty easy. You just put the function name and include appropriate parameters, as if you were calling function from within the same class in Java or C#.</p><p>Here’s a full example of a C program that uses the <code>max</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//max function prototype
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>val1</span><span class=p>,</span> <span class=n>val2</span><span class=p>,</span> <span class=n>big</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter two ints, separated by spaces: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d %d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>val1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>val2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>big</span> <span class=o>=</span> <span class=nf>max</span><span class=p>(</span><span class=n>val1</span><span class=p>,</span> <span class=n>val2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The max is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>big</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>//This indicates the program is ending normally
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//max function implementation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=n>num1</span><span class=p>,</span> <span class=kt>int</span> <span class=n>num2</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>num1</span> <span class=o>&gt;=</span> <span class=n>num2</span><span class=p>)</span> <span class=k>return</span> <span class=n>num1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>else</span> <span class=k>return</span> <span class=n>num2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=global-variables>Global Variables</h1><p>All the variables we’ve seen so far have been <em>local variables</em> – variables that are defined within a function. These variables are only visible within that function.</p><p>Consider this function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>count</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>sum</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Each time we call <code>count</code>, the <code>sum</code> variable is set back to 0, and the return value is 1. <code>sum</code> does not retain its value across function calls.</p><p>If we did want this function to keep track of how many times it had been called, we could store <code>sum</code> as a <em>global variable</em>. Global variables are declared outside any function, and are visible to any function in the same file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>count</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>sum</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now, <code>sum</code> does not get set back to 0 each time the function is called.</p><p>Global variables should be declared at the top of the file, near the function
prototypes (but before any function implementation). If a global variable is
declared in the middle of a file, some compilers will not allow you to refer to that variable in any function that comes before its declaration.</p><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 2</div><h1 id=arrays-strings-and-files>Arrays, Strings, and Files</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Arrays, Strings, and Files</h1><article class=default><header class=headline></header><h1 id=arrays>Arrays</h1><p>Arrays in C are, for the most part, the same as arrays in Java or C#. Here are the key differences:</p><ul><li>Arrays in C must be of a <strong>constant size</strong> (not a variable size from user input, for example)</li><li>Arrays in C <strong>do not have an associated length field</strong> that keep track of the number of slots in the array (you must keep track of this information yourself)</li></ul><h2 id=declaring>Declaring</h2><p>Here is the format for declaring an array:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type name[size];</span></span></code></pre></div><p>Here, <em>type</em> is the type of elements you want to store in the array (like int), <em>name</em> is the name of the array, and <em>size</em> is how many slots you want to reserve. <strong>Note that <em>size</em> MUST be a constant.</strong></p><p>Here is an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span></span></span></code></pre></div><p>However, the following will not compile because the size is given by a variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//this code will not compile as size is not constant
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=n>size</span><span class=p>];</span></span></span></code></pre></div><h2 id=initializing>Initializing</h2><p>Unlike Java, arrays in C are not initialized to any value. Instead, each slot in the array holds some random garbage value that is leftover in that spot in memory.</p><p>Here is how you could initialize all the values in the <em>nums</em> array to 0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Notice that the first index in the array is 0, and the last index is <em>size-1</em>. Also, recall that arrays do not have a length field – we must remember that we reserved 10 spaces for <em>nums</em>.</p><h2 id=arrays-and-functions>Arrays and Functions</h2><p>Arrays can be passed to functions just like any other variable. Because arrays don&rsquo;t have a length field, you will almost always want to pass the size of the array and the array itself. Here&rsquo;s an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//function prototype – takes an array of ints and its size
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>print</span><span class=p>(</span><span class=kt>int</span><span class=p>[],</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nf>print</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>print</span><span class=p>(</span><span class=kt>int</span> <span class=n>arr</span><span class=p>[],</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>arr</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=multi-dimensional-arrays>Multi-Dimensional Arrays</h2><p>You can create multi-dimensional arrays in C by specifying extra dimensions at the time of declaration. For example, this declares a 5x10 array of characters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>array</span><span class=p>[</span><span class=mi>5</span><span class=p>][</span><span class=mi>10</span><span class=p>];</span></span></span></code></pre></div><p>The first dimension is the row and the second dimension is the column. To access an array element, specify the desired row and column number. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//sets element at row 2, column 3 to &#39;A&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>array</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> 
</span></span></code></pre></div><h2 id=be-careful>Be Careful!</h2><p>If you access an array element in Java or C# with an index that is either negative or too big, you will get some kind of array index exception. Those languages will even tell you in what file and on what line the error occurred.
C is not as friendly about this mistake. If you access an element with a bad index, such as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>//10 is past the bounds of the array
</span></span></span></code></pre></div><p>Then one of two things will happen:</p><ol><li>C will allow you to modify the memory that is just past the end of your array (where spot 10 would be if there were that many spots). This memory might belong to one of your other variables!</li><li>Your program will crash with a segmentation fault (seg fault). You will see this error quite a bit when you get started in C – it means that you tried to access memory that isn&rsquo;t yours. Unfortunately, the error message does not give you any information about where the problem occurred – you will have to find it yourself.</li></ol><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=strings>Strings</h1><p>We saw before that there is no string type in C. This is true – but you can simulate a string by using an array of characters that is terminated with a special end-of-string character, &lsquo;\0&rsquo;.</p><h2 id=string-variables>String Variables</h2><p>A <em>string literal</em> can be declared as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str</span><span class=p>[]</span> <span class=o>=</span> <span class=s>&#34;Hello&#34;</span><span class=p>;</span></span></span></code></pre></div><p>After this line, str references the following characters in memory:</p><table><thead><tr><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>H</td><td>e</td><td>l</td><td>l</td><td>o</td><td>\0</td></tr></tbody></table><p>We could have created the same string like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=sc>&#39;H&#39;</span><span class=p>,</span> <span class=sc>&#39;e&#39;</span><span class=p>,</span> <span class=sc>&#39;l&#39;</span><span class=p>,</span> <span class=sc>&#39;l&#39;</span><span class=p>,</span> <span class=sc>&#39;o&#39;</span><span class=p>,</span> <span class=sc>&#39;\0&#39;</span><span class=p>};</span></span></span></code></pre></div><p>Arrays (and strings) are constant memory addresses. We can change values in strings and arrays, but we can&rsquo;t change the memory address. So, we can do things like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>str</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;h&#39;</span><span class=p>;</span> <span class=c1>//OK
</span></span></span></code></pre></div><p>But we can&rsquo;t change the memory address (the entire string):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>str</span> <span class=o>=</span> <span class=s>&#34;hi&#34;</span><span class=p>;</span> <span class=c1>//Compiler error!
</span></span></span></code></pre></div><p>Later in this section, you will see a function called <code>strcpy</code> that copies the characters from one string to another.</p><h2 id=string-input-and-output>String Input and Output</h2><p>Strings can be inputted and outputted just like any other variable. To print a string, use <code>printf</code> with the <code>%s</code> control string character. To get a string as input, you can use <code>scanf</code> (again with the <code>%s</code> control string character). When reading in a string, <code>scanf</code> will read characters up to but not including the first whitespace it encounters (&rsquo;\n&rsquo;, &rsquo; &lsquo;, &lsquo;\t&rsquo;, etc.).</p><p>Here&rsquo;s an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter your name: &#34;</span><span class=p>);</span> <span class=c1>//Suppose you enter &#34;Fred&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Hello, %s!</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span> <span class=c1>//Will print &#34;Hello, Fred!&#34;
</span></span></span></code></pre></div><p>Notice that when you use <code>scanf</code> to read in a string, you do not need to put an & in front of the string variable name. This is because a string is an array of characters, and arrays are already memory addresses. (We&rsquo;ll learn more about this in the section on Pointers.)</p><p>The trouble with using <code>scanf</code> to input strings is that the function doesn&rsquo;t check the size of the array when it is reading input. So, if you typed the name &ldquo;George Washington&rdquo; in the above example (which needs 18 characters of space), <code>scanf</code> wouldn&rsquo;t stop writing once it reached the end of the array. Instead, it would try to write past the end of the array. This would
cause some of your variables to be overwritten, or a segmentation fault. In the worst case, it could be exploited by a hacker with a <em>buffer overflow attack</em>, where the hacker knowingly inserted program instructions beyond the bounds of the input buffer.</p><p>A better choice for reading in strings is the <code>fgets</code> function. Here&rsquo;s the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>fgets</span><span class=p>(</span><span class=kt>char</span> <span class=n>s</span><span class=p>[],</span> <span class=kt>int</span> <span class=n>size</span><span class=p>,</span> <span class=n>FILE</span> <span class=o>*</span><span class=n>stream</span><span class=p>);</span></span></span></code></pre></div><p>You pass <code>fgets</code> the string buffer (<code>s</code>), the size of the buffer (<code>size</code>), and the stream you&rsquo;re reading from (use <code>stdin</code> to read as regular user input). It returns the string it read, or <code>NULL</code> if it was unable to read anything.</p><p>It will stop reading user input when either:</p><ul><li>It has read <code>size-1</code> characters (it needs the last spot for a &lsquo;\0&rsquo;)</li><li>It has reached the end of the input</li><li>It has reached a newline</li></ul><p>Here is same example using <code>fgets</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter your name: &#34;</span><span class=p>);</span> <span class=c1>//Suppose you enter &#34;Fred&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>fgets</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Hello, %s&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>);</span> <span class=c1>//Will print &#34;Hello, Fred&#34;
</span></span></span></code></pre></div><p>NOTE: if <code>fgets</code> reaches a newline character before reading <code>size-1</code> characters, it WILL store the newline as its last character (just before the <code>\0</code>). If the user enters &ldquo;Fred&rdquo; in the example above, the <code>name</code> array will hold: <code>{'F', 'r', 'e', 'd', '\n', '\0', (garbage), (garbage), (garbage), (garbage)}</code>.</p><p>If you want to remove that <code>\n</code> character, you will need to overwrite the <code>\n</code> to hold the end-of-string character instead (<code>\0</code>). We will see a convenient trick for doing this in the <code>strcspn</code> section below.</p><h2 id=conversions>Conversions</h2><p>It is sometimes necessary to convert between strings, ints, and doubles.</p><h3 id=from-string-to-intdouble>From string to int/double</h3><p>There are two conversion functions from a string to an int or double:</p><ul><li><code>atoi</code>: converts from a string to an int</li><li><code>atof</code>: converts from a string to a double</li></ul><p>To use any of these functions, you need to add:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#include &lt;stdlib.h&gt;</span></span></code></pre></div><p>To the top of the file.</p><p>Here is an example of using the conversion functions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>buff</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter an integer: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>fgets</span><span class=p>(</span><span class=n>buff</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span> <span class=c1>//Suppose you enter &#34;47&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>num</span> <span class=o>=</span> <span class=nf>atoi</span><span class=p>(</span><span class=n>buff</span><span class=p>);</span> <span class=c1>//num = 47
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a real number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>fgets</span><span class=p>(</span><span class=n>buff</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span> <span class=c1>//Suppose you enter &#34;4.75&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=nf>atof</span><span class=p>(</span><span class=n>buff</span><span class=p>);</span> <span class=c1>//d = 4.75
</span></span></span></code></pre></div><h3 id=from-intdouble-to-string>From int/double to string</h3><p>The easiest way to convert from an int or double to a string is to use the <code>sprintf</code> function, which is part of <code>stdio.h</code>. <code>sprintf</code> works exactly like <code>printf</code>, but lets you &ldquo;print&rdquo; to a string instead of to standard out. You can either print a single int or double (thus converting it to a string), or you can print longer a longer string that mixes variable values with other text. Here is an example of using <code>sprintf</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>buff1</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>buff2</span><span class=p>[</span><span class=mi>40</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>num</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>dec</span> <span class=o>=</span> <span class=mf>14.23</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>sprintf</span><span class=p>(</span><span class=n>buff1</span><span class=p>,</span> <span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>num</span><span class=p>);</span>						<span class=c1>//buff1 is now &#34;7&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>sprintf</span><span class=p>(</span><span class=n>buff2</span><span class=p>,</span> <span class=s>&#34;Decimal value: %lf.&#34;</span><span class=p>,</span> <span class=n>dec</span><span class=p>);</span>		<span class=c1>//buff2 is now &#34;Decimal value: 14.23.&#34;
</span></span></span></code></pre></div><h2 id=string-functions>String Functions</h2><p>Below is a list of common string functions. To use any of these, you need to add:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#include &lt;string.h&gt;</span></span></code></pre></div><p>To to the top of the file.</p><h3 id=strcat>strcat</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strcat</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function copies the characters in <code>str2</code> onto the end of <code>str1</code>. It returns the newly concatenated string (although <code>str1</code> also references the concatenated string).</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str1</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>str2</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter two words: &#34;</span><span class=p>);</span> <span class=c1>//Suppose you entered &#34;hi hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s %s&#34;</span><span class=p>,</span> <span class=n>str1</span><span class=p>,</span> <span class=n>str2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>strcat</span><span class=p>(</span><span class=n>str1</span><span class=p>,</span> <span class=n>str2</span><span class=p>);</span> 		<span class=c1>//str1 = &#34;hihello&#34;, str2 = &#34;hello&#34;
</span></span></span></code></pre></div><h3 id=strcmp>strcmp</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>strcmp</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function compares <code>str1</code> and <code>str2</code> to see which string comes alphabetically before the other. It returns:</p><ul><li>A number less than 0, if <code>str1</code> comes alphabetically before <code>str2</code></li><li>0, if <code>str1</code> equals <code>str2</code></li><li>A number greater than 0, if <code>str1</code> comes alphabetically after <code>str2</code></li></ul><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str1</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>str2</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter two words: &#34;</span><span class=p>);</span> <span class=c1>//Suppose you entered &#34;hi hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s %s&#34;</span><span class=p>,</span> <span class=n>str1</span><span class=p>,</span> <span class=n>str2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nf>strcmp</span><span class=p>(</span><span class=n>str1</span><span class=p>,</span> <span class=n>str2</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s comes first</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>str1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nf>strcmp</span><span class=p>(</span><span class=n>str1</span><span class=p>,</span> <span class=n>str2</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s comes first</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>str2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The strings are equal</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The code above would print &ldquo;hello comes first&rdquo;.</p><h3 id=strcpy>strcpy</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strcpy</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function copies the characters in <code>str2</code> into <code>str1</code>, overwriting anything that was already in <code>str1</code>. It returns the newly copied string (although <code>str1</code> also references the copied string).</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>src</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>dest</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a word: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>src</span><span class=p>);</span> 			<span class=c1>//Suppose you entered &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>dest</span><span class=p>,</span> <span class=n>src</span><span class=p>);</span> 			<span class=c1>//Now dest also holds &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;B&#39;</span><span class=p>;</span> 				<span class=c1>//Now src is &#34;Bello&#34;, and dest is &#34;hello&#34;
</span></span></span></code></pre></div><h3 id=strcspn>strcspn</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>strcspn</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function returns the number of characters that appear in <code>str1</code> before reaching ANY character from <code>str2</code>. (If the first character in <code>str1</code> also appears in <code>str2</code>, then <code>strcspn</code> returns 0.)</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>index</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a word: &#34;</span><span class=p>);</span><span class=c1>//Suppose you entered &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>str</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>index</span> <span class=o>=</span> <span class=nf>strcspn</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=s>&#34;la&#34;</span><span class=p>);</span> <span class=c1>//index is 2
</span></span></span><span class=line><span class=cl><span class=c1>//2 characters appear in str before finding any character from &#34;la&#34;
</span></span></span></code></pre></div><p><code>strcspn</code> is especially handy for removing the trailing <code>\n</code> that gets added to strings when using <code>fgets</code>. As we saw earlier in this section, if we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter your name: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>fgets</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span></span></span></code></pre></div><p>And enter &ldquo;Fred&rdquo;, then the <code>name</code> array will hold <code>{'F', 'r', 'e', 'd', '\n', '\0', (garbage), (garbage), (garbage), (garbage)}</code>. We can use <code>strcspn</code> to find the index of <code>\n</code> and then replace it with a <code>\0</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>name</span><span class=p>[</span><span class=nf>strcspn</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>)]</span> <span class=o>=</span> <span class=sc>&#39;\0&#39;</span><span class=p>;</span></span></span></code></pre></div><p>When <code>strcspn</code> gives us the number of characters read before reaching a <code>\n</code>, that IS the index of <code>\n</code>. In the same line, we can replace that position to be the end-of-string marker, which effectively deletes the newline from the end of the string.</p><h3 id=strlen>strlen</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>strlen</span><span class=p>(</span><span class=kt>char</span> <span class=n>str</span><span class=p>[]);</span></span></span></code></pre></div><p>This function returns the number of characters in <code>str</code>.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>str</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a word: &#34;</span><span class=p>);</span>		<span class=c1>//Suppose you entered &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>str</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>str</span><span class=p>));</span> 	<span class=c1>//prints 5
</span></span></span></code></pre></div><h3 id=strtok>strtok</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strtok</span><span class=p>(</span><span class=kt>char</span> <span class=n>str</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>delim</span><span class=p>[]);</span></span></span></code></pre></div><p>This function returns the first token found in <code>str</code> before the occurrence of any character in <code>delim</code>. (After the first call to <code>strtok</code>, pass <code>NULL</code> as <code>str</code>. This will tell it to continue looking for tokens in the original string.)</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>buff</span><span class=p>[</span><span class=mi>200</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=o>*</span><span class=n>token</span><span class=p>;</span> <span class=c1>//We&#39;ll learn about this notation in &#34;Pointers&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter names, separated by commas: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//Suppose you entered &#34;Fred,James,Jane,Lynn&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>buff</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=n>buff</span><span class=p>,</span> <span class=s>&#34;,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=n>token</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The code above will print:</p><div class=highlight><pre tabindex=0><code>Fred
James
Jane
Lynn</code></pre></div><h3 id=strncpy>strncpy</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strncpy</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[],</span> <span class=kt>int</span> <span class=n>n</span><span class=p>);</span></span></span></code></pre></div><p>This function copies the first <code>n</code> characters from <code>str2</code> to <code>str1</code>, overwriting anything that was already in <code>str1</code>. It returns the newly copied string (although <code>str1</code> also references the copied string).</p><h3 id=strncmp>strncmp</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>strncmp</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[],</span> <span class=kt>int</span> <span class=n>n</span><span class=p>);</span></span></span></code></pre></div><p>This function compares the first <code>n</code> characters in <code>str1</code> and <code>str2</code> to see which length-n prefix comes first alphabetically. It returns:</p><ul><li>A number less than 0, if the first <code>n</code> characters in <code>str1</code> come alphabetically before the first <code>n</code> characters in <code>str2</code></li><li>0, if the first <code>n</code> characters in <code>str1</code> equal the first <code>n</code> characters in <code>str2</code></li><li>A number greater than 0, if the first <code>n</code> characters in <code>str1</code> come alphabetically after the first <code>n</code> characters in <code>str2</code></li></ul><h3 id=strrchr>strrchr</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strrchr</span><span class=p>(</span><span class=kt>char</span> <span class=n>str</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>c</span><span class=p>);</span></span></span></code></pre></div><p>This function finds the LAST occurrence of <code>c</code> in <code>str</code>. It returns the suffix of <code>str</code> that begins with the last occurrence of <code>c</code>.</p><h3 id=strspn>strspn</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>strspn</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function returns the number of characters read in <code>str1</code> before reaching a character that is NOT in <code>str2</code>.</p><h3 id=strstr>strstr</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>strstr</span><span class=p>(</span><span class=kt>char</span> <span class=n>str1</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>str2</span><span class=p>[]);</span></span></span></code></pre></div><p>This function determines whether <code>str2</code> is a substring of <code>str1</code>. If <code>str2</code> is not a substring of <code>str1</code>, it returns <code>NULL</code>. If <code>str2</code> is a substring of <code>str1</code>, it returns the suffix of <code>str1</code> beginning with the <code>str2</code> substring.</p><h2 id=be-careful>Be Careful!</h2><p>It&rsquo;s very easy to make a mistake when using strings. Strings are arrays, so you will get in trouble if you try to access memory beyond the end of the array.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>buff</span><span class=p>[</span><span class=mi>5</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a word: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//Suppose you enter &#34;Hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=n>buff</span><span class=p>);</span></span></span></code></pre></div><p><code>scanf</code> will copy the characters &lsquo;H&rsquo;, &rsquo;e&rsquo;, &rsquo;l&rsquo;, &rsquo;l&rsquo;, &lsquo;o&rsquo; into the array. However, it will then try to add the end-of-string character, &lsquo;\0&rsquo;, into the 6th spot in the array. This is past the end of the array, so your program will either crash with a segmentation fault, or you will overwrite the
value of some other variable. A lot of the string functions involve writing to strings, and none of them will handle an out-of-bounds error gracefully.</p><p>When you use the following functions, <strong>MAKE SURE you have enough memory allocated</strong>:</p><ul><li><code>scanf</code></li><li><code>strcpy</code></li><li><code>strcat</code></li><li><code>strncpy</code></li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=files>Files</h1><p>This section contains information on opening a file, reading from a file, and writing to a file. I only cover how to interact with text files – it is also possible to read from and write to binary files.</p><p>Whenever you are doing file I/O, you need to add:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#include &lt;stdio.h&gt;</span></span></code></pre></div><h2 id=opening-a-file>Opening a File</h2><p>Before we can interact with a file, we need to open it. The <code>fopen</code> function lets us open files for different kinds of input and output. Here&rsquo;s the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>FILE</span><span class=o>*</span> <span class=nf>fopen</span><span class=p>(</span><span class=kt>char</span> <span class=n>filename</span><span class=p>[],</span> <span class=kt>char</span> <span class=n>mode</span><span class=p>[])</span></span></span></code></pre></div><p>The <code>FILE*</code> return type means that the function is returning the address of a <code>FILE</code> object. We&rsquo;ll learn more about pointers in the next section. If the file could not be opened, fopen returns <code>NULL</code>.</p><p>Here, <code>filename</code> is a string representation of the filename, such as &ldquo;data.txt&rdquo;. <code>fopen</code> searches the current directory for the file if no absolute path is given. The string <code>mode</code> specifies what type of operations you want to do on the file.</p><p>Here are the different options for the mode:</p><table><thead><tr><th>Mode</th><th>Description</th></tr></thead><tbody><tr><td>&ldquo;r&rdquo;</td><td>Open for reading (file must exist)</td></tr><tr><td>&ldquo;w&rdquo;</td><td>Open for writing (overwrites old data)</td></tr><tr><td>&ldquo;a&rdquo;</td><td>Open for appending (creates file if necessary)</td></tr><tr><td>&ldquo;r+&rdquo;</td><td>Open for reading and writing (file must exist)</td></tr><tr><td>&ldquo;w+&rdquo;</td><td>Open for reading and writing (overwrites old data)</td></tr><tr><td>&ldquo;a+&rdquo;</td><td>Open for reading and appending (opens at end of file)</td></tr></tbody></table><p>For example, we can open the file &ldquo;data.txt&rdquo; for reading, and print an error if we were unsuccessful:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=s>&#34;data.txt&#34;</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>fp</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Error opening file</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>After we are done reading from a file or writing to a file, we must close the file with the <code>fclose</code> function. Here&rsquo;s the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>fclose</span><span class=p>(</span><span class=n>FILE</span><span class=o>*</span> <span class=n>fp</span><span class=p>)</span></span></span></code></pre></div><p>To close data.txt, we&rsquo;d do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span></span></span></code></pre></div><h2 id=reading-from-a-file>Reading from a File</h2><p>There are two major functions for reading from a file – <code>fscanf</code> and <code>fgets</code>. <code>fgets</code> works exactly like we&rsquo;ve seen before, except now we specify a <code>FILE*</code> instead of <code>stdin</code>. <code>fscanf</code> works exactly like <code>scanf</code>, except we first specify the <code>FILE*</code>. We&rsquo;ll start with <code>fscanf</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>fscanf</span><span class=p>(</span><span class=n>FILE</span> <span class=o>*</span><span class=n>stream</span><span class=p>,</span> <span class=kt>char</span> <span class=n>str</span><span class=p>[],</span> <span class=n>variable</span> <span class=n>addresses</span><span class=p>...)</span></span></span></code></pre></div><p><code>fscanf</code>, like <code>scanf</code>, returns the number of variables that were correctly read in. If it was unable to read any more input, the <code>EOF</code> constant is returned. Thus we can compare the return value of <code>fscanf</code> to <code>EOF</code> to see if we&rsquo;ve reached the end of the file.</p><p>Suppose the file data.txt looks like this (a bunch of names and ages, each on separate lines):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Bob 20
</span></span><span class=line><span class=cl>Jill 15
</span></span><span class=line><span class=cl>Tony 17
</span></span><span class=line><span class=cl>Lisa 22</span></span></code></pre></div><p>We want to read this file, and print something like &ldquo;Bob is 20 years old&rdquo; to the console for each person in the file. Here&rsquo;s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=s>&#34;data.txt&#34;</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>fp</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=nf>fscanf</span><span class=p>(</span><span class=n>fp</span><span class=p>,</span> <span class=s>&#34;%s %d&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>age</span><span class=p>)</span> <span class=o>!=</span> <span class=n>EOF</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s is %d years old</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now, lets try to do the same thing with the <code>fgets</code> function. Here&rsquo;s the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=p>[]</span> <span class=nf>fgets</span><span class=p>(</span><span class=kt>char</span> <span class=n>s</span><span class=p>[],</span> <span class=kt>int</span> <span class=n>size</span><span class=p>,</span> <span class=n>FILE</span> <span class=o>*</span><span class=n>stream</span><span class=p>)</span></span></span></code></pre></div><p><code>fgets</code> reads a string from a specified file into the <code>s</code> array. The <code>size</code> parameter specifies the size of the string – it will not write past the end of the array. It returns a reference to the string that was read. If no string was read (specifying an error or the end of file), <code>NULL</code> is returned.
<code>fgets</code> will attempt to read <code>size-1</code> characters <em>unless it reaches a newline or the end of the file</em>.</p><p>Here&rsquo;s the same example repeated with <code>fgets</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=s>&#34;data.txt&#34;</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=n>buf</span><span class=p>[</span><span class=mi>30</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>fp</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=nf>fgets</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=n>fp</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//parse the current line
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>char</span> <span class=o>*</span><span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span> <span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>strcpy</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//get the age
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=n>buf</span><span class=p>,</span> <span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span> <span class=o>=</span> <span class=nf>atoi</span><span class=p>(</span><span class=n>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s is %d years old</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>As we saw when using <code>fgets</code> to read from <code>stdin</code>, it WILL store the newline character at the end of each string when reading from a file (assuming there is still room in the array). You may want to use <code>strcspn</code> to overwrite the <code>\n</code> with a <code>\0</code>.</p><p>Reading files with <code>fscanf</code> is usually simpler (since it doesn&rsquo;t involve parsing lines), but it is more error-prone than <code>fgets</code>.</p><h2 id=writing-to-a-file>Writing to a File</h2><p>The primary function for writing to a file is <code>fprintf</code>. This function works exactly like <code>printf</code>, but the first argument is now a <code>FILE*</code>. Here&rsquo;s the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>fprintf</span><span class=p>(</span><span class=n>FILE</span><span class=o>*</span> <span class=n>fp</span><span class=p>,</span> <span class=kt>char</span> <span class=n>str</span><span class=p>[],</span> <span class=n>variables</span> <span class=n>to</span> <span class=n>print</span><span class=p>...)</span></span></span></code></pre></div><p>Here is an example that will ask the user to input 10 numbers. Each number will be written on a separate line to the file out.txt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=s>&#34;out.txt&#34;</span><span class=p>,</span> <span class=s>&#34;w&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>fp</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>num</span><span class=p>,</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Type a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>fprintf</span><span class=p>(</span><span class=n>fp</span><span class=p>,</span> <span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>num</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 3</div><h1 id=pointers-and-dynamic-memory>Pointers and Dynamic Memory</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Pointers and Dynamic Memory</h1><article class=default><header class=headline></header><h1 id=pointers>Pointers</h1><p>Pointers in C are variables that store the memory address of some other variable or data. They have an associated type of what kind of value they reference.</p><p>Pointers are one of the most difficult concepts in the C language. However, mastering pointers allows you do have a deeper understanding of what actually happens when your program runs. Higher-level languages do not explicitly use pointers, but they do use pointers &ldquo;behind the scenes&rdquo;. Learning pointers in C can also help you understand what&rsquo;s going on in Java/C#/etc. programs.</p><h2 id=declaring>Declaring</h2><p>The type of a pointer variable is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type*</span></span></code></pre></div><p>where <em>type</em> is the type of data this pointer will reference. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>intPtr</span><span class=p>;</span></span></span></code></pre></div><p><em>intPtr</em> can hold the address of an int variable. Another:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span><span class=o>*</span> <span class=n>charPtr</span><span class=p>;</span></span></span></code></pre></div><p><em>charPtr</em> can hold the address of a char variable.</p><p>When you are declaring pointers, the * can go any where between the type and the variable name. For example, all of the following are acceptable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>intPtr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=o>*</span> <span class=n>intPtr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span><span class=n>intPtr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=o>*</span><span class=n>intPtr</span><span class=p>;</span></span></span></code></pre></div><p>Variables in C are not automatically initialized – and this includes pointers. After declaring a pointer, it holds some garbage value that was left in that spot in memory.</p><h2 id=-operator-address-of>& Operator (Address-Of)</h2><p>The & operator returns the memory address of a variable. For example, if we have:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span></span></span></code></pre></div><p>And the <em>x</em> variable is stored at spot 1714 in memory (every variable is given a certain spot in memory, and these spots have an associated number), then if we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>&amp;</span><span class=n>x</span></span></span></code></pre></div><p>this will give us the 1714 spot.</p><p>The address-of operator isn&rsquo;t very useful unless we&rsquo;re using pointers. Since pointers are supposed to hold memory addresses, we can initialize them to be the address of some other variable.</p><p>So, suppose we have the following variable declarations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span> <span class=c1>//x is given spot 1714 in memory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>xPtr</span><span class=p>;</span></span></span></code></pre></div><p>We can make the <em>xPtr</em> variable reference <em>x</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>xPtr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>x</span><span class=p>;</span> <span class=c1>//Now xPtr &#34;points to&#34; x – it holds address 1714
</span></span></span></code></pre></div><p>Notice that when we DECLARE a pointer, we include the *. However, when we INITIALIZE the pointer, we don&rsquo;t include the *.</p><h2 id=-operator-dereferencing>* Operator (Dereferencing)</h2><p>The * operator is an operator specifically for pointer variables. It returns the value of what is being pointed at.</p><p>For example, if we have:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span> <span class=c1>//x is given spot 1714 in memory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>xPtr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>xPtr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>x</span><span class=p>;</span></span></span></code></pre></div><p>Then saying *<em>xPtr</em> gets us the value pointed to by <em>xPtr</em>. <em>xPtr</em> holds memory address 1714, so if I say *<em>xPtr</em>, then I get the value stored in spot 1714 – which is a 4. I can also use this operator to modify the value at that spot in memory. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>*</span><span class=n>xPtr</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span></span></span></code></pre></div><p>Now the value at spot 1714 is a 6. The <em>x</em> variable is stored in spot 1714, so now <em>x</em> has the value 6.</p><h2 id=example>Example</h2><p>The following example illustrates how pointers work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>      <span class=c1>//i gets a memory location, say 3245, and has some random value
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>ip</span><span class=p>;</span>    <span class=c1>//ip has some random address
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>i</span> <span class=o>=</span> <span class=mi>36</span><span class=p>;</span>     <span class=c1>//i has the value 36
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>72</span><span class=p>;</span>   <span class=c1>//Most likely, causes a segmentation fault
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>ip</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>i</span><span class=p>;</span>    <span class=c1>//ip references memory address 3245
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>72</span><span class=p>;</span>   <span class=c1>//Memory address 3245 has value 72 (so i = 72)
</span></span></span></code></pre></div><p>The reason <code>*ip = 72</code> will cause problems is that <code>*ip</code> currently holds some random memory address, since it has not been initialized. When we say <code>*ip</code>, we&rsquo;re trying to access the memory at that random spot. This is most likely not the program&rsquo;s memory, so we will get a segmentation fault when we try to change it. (The other possibility is that we could end up overwriting one of the other program variables.)</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=pointers-vs-arrays>Pointers vs. Arrays</h1><p>Arrays and pointers have a lot in common. When we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span></span></span></code></pre></div><p>Then we get a spot in memory that looks like this:</p><p><a href=#R-image-d9c174385b2157f2d9f39dbffc601db0 class=lightbox-link><img alt="new array" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/emptyArray.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d9c174385b2157f2d9f39dbffc601db0><img alt="new array" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/emptyArray.png></a></p><p>But what is <em>nums</em>? It is actually a constant pointer to the first spot in the array, <code>nums[0]</code>. So really, the picture looks like this:</p><p><a href=#R-image-8f671ffcd0291e34155ceb7477cbcbe9 class=lightbox-link><img alt="nums array" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/numsArray.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8f671ffcd0291e34155ceb7477cbcbe9><img alt="nums array" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/numsArray.png></a></p><p>So, <code>&amp;nums[0]</code> (the address of the first element in the array) is the same thing as <code>nums</code>.</p><h2 id=pointer-notation>Pointer Notation</h2><p>Because pointers and arrays are essentially the same thing (except array addresses cannot be
changed), we can also access elements in an array by treating it as a pointer. In the above
example, <code>nums</code> is a pointer to the first spot in the array. Space for arrays is reserved
contiguously, so the second element in the array is physically next to the first element. This
means that I can say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>nums+1</span></span></code></pre></div><p>to get the memory address of the second element in the array.</p><p>Note: an integer uses 4 bytes of space. However, you don’t say <code>nums+4</code> to move to the next
integer. This is because pointers have a particular type associated with them – like an int – and
the compiler will automatically move over the space of an int when you say <code>+1</code>.</p><p>Suppose now that you want to initialize the value at index 4 in the <code>nums</code> array to 7. You could
say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>nums</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span></span></span></code></pre></div><p>However, you could do the same thing by treating <em>nums</em> as a pointer. You can get the address of
the array element at index 4 by saying:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>nums</span><span class=o>+</span><span class=mi>4</span></span></span></code></pre></div><p>This is a pointer, so if we want to change the contents of that location to 7, we need to
dereference it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>*</span><span class=p>(</span><span class=n>nums</span><span class=o>+</span><span class=mi>4</span><span class=p>)</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span></span></span></code></pre></div><h2 id=example>Example</h2><p>Recall that an array is a constant pointer to a block of reserved memory. This means that we can
change the values stored in the array, but we can’t change the array itself (make it reference
another piece of memory). Consider the following statements – which are legal?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>a</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span> 		<span class=c1>//OK – a points to a block of 10 ints in memory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>a</span><span class=o>++</span><span class=p>;</span> 			<span class=c1>//NO – The address of an array can’t change
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>xp</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>	<span class=c1>//OK – Now xp also points to the beginning of the array
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>a</span> <span class=o>=</span> <span class=n>xp</span><span class=p>;</span> 		<span class=c1>//NO – The address of an array can’t change
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>b</span><span class=p>[</span><span class=mi>5</span><span class=p>];</span> 		<span class=c1>//OK – b points to a block of 5 ints in memory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>bp</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>	<span class=c1>//OK – Now b also points to the beginning of the array
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>xp</span><span class=o>++</span><span class=p>;</span> 			<span class=c1>//OK – Now xp points to the second element in the array
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>*</span><span class=n>xp</span> <span class=o>=</span> <span class=mi>14</span><span class=p>;</span> 		<span class=c1>//OK – The second element in the array is set to 14 (a[1] = 14)
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=iteration-with-pointers>Iteration with Pointers</h1><p>This is how we have initialized array elements in the past:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>However, now that we can treat arrays like pointers, there is a different way to initialize array
elements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=o>*</span><span class=n>ip</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>ip</span> <span class=o>=</span> <span class=n>nums</span><span class=p>;</span> <span class=n>ip</span> <span class=o>&lt;</span> <span class=n>nums</span><span class=o>+</span><span class=mi>10</span><span class=p>;</span> <span class=n>ip</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Here, <code>ip</code> is a pointer that starts by pointing to the first element in the array. We loop while the
value of <code>ip</code> (the memory address) is less than <code>nums+10</code> – which is the address of the last
element in the array. Each time, <code>ip++</code> advances <code>ip</code> to point at the next element in the array.
Inside the loop, we dereference <code>ip</code> to get the current array element, and set that element to 0.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=pointers-to-pointers>Pointers to Pointers</h1><p>Just like a variable can be a pointer, we can also declare pointers to pointers. (We can take it
even further than that, but it starts to get pretty confusing!) You can denote the &ldquo;level&rdquo; of the
pointer by how many *’s you use in the declaration.</p><p>Here&rsquo;s an example of using pointers to pointers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span> 		<span class=c1>//declares the int i
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>ip</span><span class=p>;</span> 	<span class=c1>//declares the int pointer ip
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>**</span><span class=n>ipp</span><span class=p>;</span> 	<span class=c1>//declares a pointer to a pointer to an int, ipp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>i</span> <span class=o>=</span> <span class=mi>36</span><span class=p>;</span> 	<span class=c1>//gives i the value 36
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>ip</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>i</span><span class=p>;</span> 	<span class=c1>//now ip points to i
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>72</span><span class=p>;</span> 	<span class=c1>//dereferences ip to get i, and sets it to 72 (now i=72)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>ipp</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ip</span><span class=p>;</span> 	<span class=c1>//ipp points to ip, which points to i
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>**</span><span class=n>ipp</span> <span class=o>=</span> <span class=mi>24</span><span class=p>;</span> <span class=c1>//dereferences ipp to get ip, then dereferences again to get i,
</span></span></span><span class=line><span class=cl><span class=c1></span>			<span class=c1>//and sets it to 24 (now i = 24)
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=call-by-reference>Call by Reference</h1><p>C functions are naturally call-by-value, which means that we don’t pass variables themselves –
we pass their value. So, if we modify one of the parameters in our function, it does not modify
the original variable passed to the function. Consider the following example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//This example doesn’t work!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>b</span> <span class=o>=</span> <span class=n>temp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//assume the test code below is in another function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>swap</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span></span></span></code></pre></div><p>This code fragment is supposed to swap the values in <code>x</code> and <code>y</code>, so that <code>x == 4</code> and <code>y == 3</code>.
However, when we call <code>swap</code>, only the VALUES 3 and 4 are passed – not <code>x</code> and <code>y</code> themselves.
The values 3 and 4 get bound to the function parameters <code>a</code> and <code>b</code>. By the end of the function, we
do have that <code>a == 4</code> and <code>b == 3</code>. However, <code>x</code> and <code>y</code> don’t change because they are completely
different from <code>a</code> and <code>b</code>.
If we do want to change <code>x</code> and <code>y</code>, we need to pass in the address of <code>x</code> and the address of <code>y</code>. Then,
we can update the values at those memory locations. Here is our revised <code>swap</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//Take two memory addresses (pointers)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=o>*</span><span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>temp</span> <span class=o>=</span> <span class=o>*</span><span class=n>a</span><span class=p>;</span> 	<span class=c1>//Store the value pointed to by a
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>*</span><span class=n>a</span> <span class=o>=</span> <span class=o>*</span><span class=n>b</span><span class=p>;</span> 		<span class=c1>//Update the contents of a to be the contents of b
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>*</span><span class=n>b</span> <span class=o>=</span> <span class=n>temp</span><span class=p>;</span> 		<span class=c1>//Update the contents of a to be temp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><p>Now, when we call <code>swap</code>, we will need to pass the memory address of the variables we want to
swap. This means we need to use the & operator:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>x</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>y</span><span class=p>);</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=sizeof>sizeof</h1><p>The <code>sizeof</code> function in C returns the number of bytes needed to store a specified type. It is
needed for dynamic memory allocation because we need to know how many bytes we want to
allocate.</p><p>Here is the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>sizeof</span><span class=p>(</span><span class=n>type</span><span class=p>);</span></span></span></code></pre></div><p>where <code>type</code> is a defined type in C, like <code>char</code> or <code>int</code>. Here are a few examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span> 	<span class=c1>//evaluates to 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>)</span> 	<span class=c1>//evaluates to 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>sizeof</span><span class=p>(</span><span class=kt>double</span><span class=p>)</span> 	<span class=c1>//evaluates to 8
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span> 	<span class=c1>//evaluates to 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=o>*</span><span class=p>)</span> 	<span class=c1>//evaluates to 4
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=dynamic-memory>Dynamic Memory</h1><p>Currently, we can only declare arrays to be of a constant size (like 10). This is not always
convenient – sometimes we want to make the size based on some user input. If we want to
allocate a dynamic amount of space, we need to use C&rsquo;s dynamic memory functions. Each of
these functions is in <code>&lt;stdlib.h></code>.</p><h2 id=malloc>malloc</h2><p>This function allocates a contiguous block of memory with the specifies size (number of bytes).
It returns a void pointer to the block of memory. (This pointer will be automatically cast to the
correct type when you store it.)</p><p>Here is the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span><span class=o>*</span> <span class=nf>malloc</span><span class=p>(</span><span class=kt>int</span> <span class=n>numBytes</span><span class=p>);</span></span></span></code></pre></div><p>For example, we could allocate an array like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>nums1</span><span class=p>[</span><span class=mi>5</span><span class=p>];</span></span></span></code></pre></div><p>Or we could do the same thing using <code>malloc</code>. If we use <code>malloc</code>, we need to specify the
number of bytes to reserve. We want 5 ints, and each int takes up <code>sizeof(int)</code> bytes. So,
the total needed is <code>5*sizeof(int)</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//The result of malloc is automatically cast to an int*
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span><span class=o>*</span> <span class=n>nums2</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=mi>5</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span></span></span></code></pre></div><p>Now, we can treat <code>nums2</code> just like an array. For instance, if we wanted to initialize all elements
in <code>nums2</code> to 0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>nums2</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> 	<span class=c1>//The compiler converts this to *(nums2+i) = 0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><p>Allocating arrays with malloc has several key difference from standard array allocation:</p><ul><li><code>malloc</code> can handle a variable for the desired size; a standard array cannot</li><li>The result of <code>malloc</code> is a pointer; the result of a standard array allocation is a constant pointer</li><li><code>malloc</code> memory is allocated on the heap. If there is not enough space to do the allocation, <code>malloc</code> will return NULL. An array is allocated on the program stack – if there is not enough space, the program simply won&rsquo;t compile.</li></ul><h2 id=calloc>calloc</h2><p>The <code>calloc</code> function is very similar to <code>malloc</code>. The only difference is that when arrays are
allocated using <code>calloc</code>, all elements are automatically initialized to 0.</p><p>Here is the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span><span class=o>*</span> <span class=nf>calloc</span><span class=p>(</span><span class=kt>int</span> <span class=n>numElems</span><span class=p>,</span> <span class=kt>int</span> <span class=n>sizePerElem</span><span class=p>);</span></span></span></code></pre></div><p>The prototype of <code>calloc</code> is also a little different than the one for <code>malloc</code>. It takes two
arguments – the number of elements you want in the array, and the number of bytes needed for
each elements. Like <code>malloc</code>, <code>calloc</code> returns a void pointer to the contiguous block of
memory it allocated. This pointer will be automatically cast to the appropriate type when you
store it.</p><p>Here&rsquo;s how to create an array of 10 ints, all initialized to 0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>nums</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span></span></span></code></pre></div><p>Now you can use <code>nums</code> just like an array. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span></span></span></code></pre></div><p>Like <code>malloc</code>, <code>calloc</code> will return NULL if there is not enough space to do the allocation. In
both cases, it&rsquo;s a good idea to check if the pointer is NULL before you use it.</p><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>nums</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>nums</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Not enough space.</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>//Use nums as usual
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><h2 id=realloc>realloc</h2><p>The <code>realloc</code> function allows you to easily expand and shrink the space allocated for an array.</p><p>Here is the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span><span class=o>*</span> <span class=nf>realloc</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>origPtr</span><span class=p>,</span> <span class=kt>int</span> <span class=n>newSize</span><span class=p>);</span></span></span></code></pre></div><p>This function takes your original pointer and the desired new size in bytes. It looks for a
contiguous block of memory with the desired size. If it can find one, it copies the contents of the
old array into the new block of memory. Then it releases the space needed for the old array, and
returns a void pointer to the new block of memory.</p><p>The <code>realloc</code> function doesn&rsquo;t always behave as you intend. Here are the possible return
values of <code>realloc</code>:</p><ul><li>NULL (if not enough space is found)</li><li>The original pointer (if there is enough space at that location)</li><li>A new pointer to a different spot in memory</li></ul><p>Suppose we allocate the <code>nums</code> array like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>nums</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span></span></span></code></pre></div><p>Now we decide that we want <code>nums</code> to hold 15 elements instead of 10. Here&rsquo;s what we might
try:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>nums</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=mi>15</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span></span></span></code></pre></div><p>Suppose that <code>realloc</code> could not find enough space to grant the request – so it returns NULL.
This means that we assign NULL to our original <code>nums</code> pointer. Now <code>nums</code> does not reference
the original array – in fact, nothing does. The original array is stuck in memory with no way to
get at it – this is called a <em>memory leak</em>.</p><p>To fix this problem, assign a temporary pointer to the result of <code>realloc</code>. Then, if it&rsquo;s not
NULL, reassign the original pointer. This keeps you from losing your array:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=o>*</span><span class=n>temp</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=mi>15</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>temp</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>nums</span> <span class=o>=</span> <span class=n>temp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=free>free</h2><p>In Java and C#, any memory that you&rsquo;re no longer using will be cleaned up by the garbage collector. C
has no garbage collector, so you are in charge of releasing memory that you&rsquo;re done with. If you
never release any allocated memory, you will eventually run out of space.</p><p>The C function that releases dynamic memory is called <code>free</code>. Here is the prototype:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>free</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>pointer</span><span class=p>);</span></span></span></code></pre></div><p>Note that even though <code>free</code> takes a void pointer, it can take any type of pointer that has been
dynamically allocated.</p><p>Here&rsquo;s an example of using <code>free</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span><span class=o>*</span> <span class=n>nums</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>nums</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//done using nums
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>free</span><span class=p>(</span><span class=n>nums</span><span class=p>);</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=multi-dimensional-dynamic-arrays>Multi-dimensional Dynamic Arrays</h1><p>We can also create multi-dimensional dynamic arrays using <code>malloc</code>. This section will focus on
creating two-dimensional arrays. You can get more dimensions by adapting the following
process:</p><ol><li>Use <code>malloc</code> to create an array of pointers. Each pointer in the array will point to a row
in the two-dimensional array.</li></ol><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//Final array will have 3 rows
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>**</span><span class=n>matrix</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=mi>3</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>));</span></span></span></code></pre></div><ol start=2><li>Use <code>malloc</code> to allocate space for each row:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>//Final array will have 4 columns
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>matrix</span> <span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=mi>4</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><ol start=3><li>Now we can treat the pointer like a traditional two-dimensional array. For example, we
could set every element to 0:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>j</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>matrix</span> <span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><ol start=4><li>When we are done using a multi-dimensional array, we release the memory in reverse order of
how we allocated it. So, first we release each row:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>free</span><span class=p>(</span><span class=n>matrix</span> <span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>And then we release the top-level array of pointers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>free</span><span class=p>(</span><span class=n>matrix</span><span class=p>);</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=returning-pointers-from-functions>Returning Pointers from Functions</h1><p>We can also return pointers from functions via
pointer arguments rather than as the formal return value. To explain this, let&rsquo;s first step back and
consider the case of returning a simple type, such as int, from a function via a pointer argument.</p><p>If we write the function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>f</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>ip</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>And then call it like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>f</span><span class=p>(</span><span class=o>&amp;</span><span class=n>i</span><span class=p>);</span></span></span></code></pre></div><p>then <code>f</code> will &ldquo;return&rdquo; the value 5 by writing it to the location specified by the pointer passed by the
caller; in this case, to the caller&rsquo;s variable <code>i</code>. A function might &ldquo;return&rdquo; values in this way if it had
multiple things to return, since a function can only have one formal return value (that is, it can only
return one value via the return statement.) The important thing to notice is that for the function to
return a value of type int, it used a parameter of type pointer-to-int.</p><p>Now, suppose that a function wants to return a pointer in this way. The corresponding parameter will
then have to be a pointer to a pointer. For example, here is a function which tries to allocate
memory for a string of length <code>n</code>, and which returns zero (<code>false</code>) if it fails and 1 (nonzero, or <code>true</code>)
if it succeeds, returning the actual pointer to the allocated memory via a pointer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>int</span> <span class=nf>allocstr</span><span class=p>(</span><span class=kt>int</span> <span class=n>len</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>retptr</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=c1>//+1 for the \0 character
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>char</span> <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=n>len</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>p</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>retptr</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The caller can then do something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=o>*</span><span class=n>string</span> <span class=o>=</span> <span class=s>&#34;Hello, world!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=o>*</span><span class=n>copystr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nf>allocstr</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>string</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>copystr</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>strcpy</span><span class=p>(</span><span class=n>copystr</span><span class=p>,</span> <span class=n>string</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=n>stderr</span><span class=p>,</span> <span class=s>&#34;out of memory</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 4</div><h1 id=structs>Structs</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Structs</h1><article class=default><header class=headline></header><h1 id=struct-syntax>Struct Syntax</h1><p>C is a procedural programming language, which means that a program is just a collection of
functions – no classes. However, C does have a construct called a struct that is similar to a data
class in Java. A struct is simply a new variable type that is a collection of related data.</p><h2 id=syntax>Syntax</h2><p>Here is the format of a struct declaration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>struct name {
</span></span><span class=line><span class=cl>    type1 name1;
</span></span><span class=line><span class=cl>    type2 name2;
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>} objList;</span></span></code></pre></div><p>Here, <code>name</code> is the optional name for this structure type. This name is needed if you plan to
created any variables of this struct type.
The <code>type name</code> elements are fields that you want in your struct. For example, if the struct
represented a person, you might want these fields:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>age</span><span class=p>;</span></span></span></code></pre></div><p>Fields in structs are the same idea as fields in a Java or C# class.</p><p>Finally, <code>objList</code> is an optional
list of variable names you want constructed with this struct type.</p><h2 id=first-example>First Example</h2><p>Here is a simple struct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>;</span></span></span></code></pre></div><p>Now, <code>struct person</code> is a new datatype. <code>p1</code> and <code>p2</code> are variables of type <code>struct person</code>.</p><h2 id=declaring-struct-variables>Declaring Struct Variables</h2><p>You can automatically declare struct variables by listing variable names at the end of the struct
definition. You can also declare them outside the definition just like you do ordinary variables.
The format for declaring variables in C is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type name;</span></span></code></pre></div><p>The type of the above struct, for example, is <code>struct person</code>. So we can declare another
struct variable as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=n>p3</span><span class=p>;</span></span></span></code></pre></div><p>This declaration automatically allocates space for the struct, including space for every field in the
struct.</p><h2 id=accessing-struct-fields>Accessing Struct Fields</h2><p>Accessing a field in a struct variable is exactly like accessing a field in a Java or C#
object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>structVar</span><span class=p>.</span><span class=n>fieldName</span></span></span></code></pre></div><p>Here, <code>structVar</code> is the name of the struct variable and <code>fieldName</code> is one of the fields in the
struct. This allows us to access or change that field.
Let&rsquo;s declare another struct person variable, and set the person&rsquo;s name to &ldquo;Bob&rdquo; and age to 20.</p><p>Here&rsquo;s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=n>bobPerson</span><span class=p>;</span>        <span class=c1>//declare struct variable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>bobPerson</span><span class=p>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>             <span class=c1>//set person&#39;s age to 20
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>strcpy</span><span class=p>(</span><span class=n>bobPerson</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Bob&#34;</span><span class=p>);</span>  <span class=c1>//set person&#39;s name to &#34;Bob&#34;
</span></span></span></code></pre></div><p>Notice that if we are initializing a string field, we must use <code>strcpy</code>. The following will NOT
compile since name is an array (a constant pointer):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>bobPerson</span><span class=p>.</span><span class=n>name</span> <span class=o>=</span> <span class=s>&#34;Bob&#34;</span><span class=p>;</span>         <span class=c1>//Will not compile!
</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=struct-example>Struct Example</h1><p>Structs can be declared at any point in a C program, but they are usually declared with the global
variables (right after the include statements). This way, the struct type can be used throughout
the file.</p><p>Here is an example that uses a struct to store a two-dimensional point (x, y location). It gets two
points as input, and then prints the equation that passes through the points.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>struct</span> <span class=n>point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span> <span class=c1>//No variables declared here
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getSlope</span><span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>,</span> <span class=kt>double</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>point</span> <span class=n>p1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>point</span> <span class=n>p2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>slope</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>intercept</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter point1, e.g. (1, 2): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;(%d, %d)&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>x</span><span class=p>),</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter point2, e.g. (1, 2): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;(%d, %d)&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>x</span><span class=p>),</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>slope</span> <span class=o>=</span> <span class=nf>getSlope</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>p1</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>p2</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>p2</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>intercept</span> <span class=o>=</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>p1</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>slope</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//prints equation in form y = mx + b
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//m: slope, b: y-intercept
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;y = %.2lfx + %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>slope</span><span class=p>,</span> <span class=n>intercept</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getSlope</span><span class=p>(</span><span class=kt>int</span> <span class=n>x1</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x2</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y1</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//slope = change in y / change in x
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>(</span><span class=n>y2</span><span class=o>-</span><span class=n>y1</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>x2</span><span class=o>-</span><span class=n>x1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>,</span> <span class=kt>double</span> <span class=n>slope</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//if y = mx + b, b = y - mx
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>y</span> <span class=o>-</span> <span class=n>slope</span><span class=o>*</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=structs-and-functions>Structs and Functions</h1><p>We could have also written the <a href=https://textbooks.cs.ksu.edu/cis308/4-chapter/4_2-structexample/ rel=external target=_blank>point example</a>
by passing the point structs to the <code>getSlope</code> and
<code>getIntercept</code> functions (instead of passing their fields). This works just like passing other
variable types, except <code>struct point</code> will be an argument type.
Here&rsquo;s the example when we pass the points to the functions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>point</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span> <span class=c1>//No variables declared here
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getSlope</span><span class=p>(</span><span class=k>struct</span> <span class=n>point</span><span class=p>,</span> <span class=k>struct</span> <span class=n>point</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=k>struct</span> <span class=n>point</span><span class=p>,</span> <span class=kt>double</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>point</span> <span class=n>p1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>point</span> <span class=n>p2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>slope</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>intercept</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter point1, e.g. (1, 2): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;(%d, %d)&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>x</span><span class=p>),</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter point2, e.g. (1, 2): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;(%d, %d)&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>x</span><span class=p>),</span> <span class=o>&amp;</span><span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>y</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>slope</span> <span class=o>=</span> <span class=nf>getSlope</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>p2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>intercept</span> <span class=o>=</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>slope</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//prints equation in form y = mx + b
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//m: slope, b: y-intercept
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;y = %.2lfx + %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>slope</span><span class=p>,</span> <span class=n>intercept</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getSlope</span><span class=p>(</span><span class=k>struct</span> <span class=n>point</span> <span class=n>p1</span><span class=p>,</span> <span class=k>struct</span> <span class=n>point</span> <span class=n>p2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//slope = change in y / change in x
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>y</span><span class=o>-</span><span class=n>p1</span><span class=p>.</span><span class=n>y</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>p2</span><span class=p>.</span><span class=n>x</span><span class=o>-</span><span class=n>p1</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getIntercept</span><span class=p>(</span><span class=k>struct</span> <span class=n>point</span> <span class=n>p</span><span class=p>,</span> <span class=kt>double</span> <span class=n>slope</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//if y = mx + b, b = y - mx
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>p</span><span class=p>.</span><span class=n>y</span> <span class=o>-</span> <span class=n>slope</span><span class=o>*</span><span class=n>p</span><span class=p>.</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=arrays-of-structs>Arrays of Structs</h1><p>You can create arrays of structs in C just like you can create arrays of any other type. The format for creating constant-sized arrays is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type name[size];</span></span></code></pre></div><p>Consider the person struct again:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Here&rsquo;s how to create a 3-slot array of type <code>struct person</code> called <code>group</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//&#34;struct person&#34; is the type; &#34;group&#34; is the array name
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=n>person</span> <span class=n>group</span><span class=p>[</span><span class=mi>3</span><span class=p>];</span></span></span></code></pre></div><p>When you create an array of type struct, C allocates space for each struct element (and its fields)
in the array.</p><p>We can get out a particular struct element using an array index:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>group</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>        <span class=c1>//the first struct person in the array
</span></span></span></code></pre></div><p>For example, here&rsquo;s how we could set the first person&rsquo;s name to &ldquo;Bob&rdquo; and age to 20:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>group</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Bob&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>group</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>age</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=pointers-to-structs>Pointers to Structs</h1><p>You can declare a pointer to a struct just like you declare a pointer to another element type. The
format for declaring a pointer is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>type* name;</span></span></code></pre></div><p>So, to declare a pointer to a <code>struct person</code> element, we could say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span><span class=o>*</span> <span class=n>personPtr</span><span class=p>;</span></span></span></code></pre></div><p>Suppose we have another <code>struct person</code> variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=n>p1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Jill&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>p1</span><span class=p>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span></span></span></code></pre></div><p>Then we can make <code>personPtr</code> point to <code>p1</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>personPtr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>p1</span><span class=p>;</span></span></span></code></pre></div><h2 id=allocating-memory>Allocating Memory</h2><p>We can also create struct variables by:</p><ol><li>Declaring a pointer to a struct</li><li>Allocating memory for the struct</li></ol><p>This approach (using pointers instead of standard variables) is handy when building data
structures like linked lists.</p><p>To create a struct person in this way, we first declare a pointer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span><span class=o>*</span> <span class=n>personPtr</span><span class=p>;</span></span></span></code></pre></div><p>Then we allocate memory for the struct, and give <code>personPtr</code> the address of that memory. We
can use <code>sizeof(struct person)</code> to get the number of bytes needed to store a variable of
type <code>struct person</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>personPtr</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>person</span><span class=p>));</span></span></span></code></pre></div><p>Now, <code>personPtr</code> points to a <code>struct person</code>, which has space for the <code>name</code> and <code>age</code> fields.</p><h2 id=accessing-fields>Accessing Fields</h2><p>We can get at the struct person object itself by dereferencing <code>personPtr</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>*</span><span class=n>personPtr</span></span></span></code></pre></div><p>We can then initialize the fields:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>(</span><span class=o>*</span><span class=n>personPtr</span><span class=p>).</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span></span></span></code></pre></div><p>This line does two things:</p><ol><li>Dereferences the pointer to get at the <code>struct person</code> object</li><li>Changes the person’s age to 18</li></ol><p>Do NOT write something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>*</span><span class=n>personPtr</span><span class=p>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>    <span class=c1>//BAD!
</span></span></span></code></pre></div><p>The compiler will try to resolve the &ldquo;.&rdquo; operator first. Because <code>personPtr</code> is a pointer and not
a struct, using a . doesn’t make sense. This line will result in a compiler error. We need to
dereference the pointer before we can access any fields.</p><p>Pointers to structs are very common in C, and you’ll often find yourself dereferencing a struct
pointer and then accessing one of the fields. Because of this, there is a shortcut notation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>personPtr</span><span class=o>-&gt;</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//Is equivalent to:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>(</span><span class=o>*</span><span class=n>personPtr</span><span class=p>).</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=linked-lists>Linked Lists</h1><p>We can use structs to help implement all the common data structures in C. For example,
whereas before we would have created a Node class to help us write a linked list, we will now
create a node struct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span> <span class=c1>//pointer to next node in list
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span></span></span></code></pre></div><p>Suppose we want to create a linked list with a single node. First, we declare a head variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>head</span><span class=p>;</span></span></span></code></pre></div><p>Then, we allocate memory for the node:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>head</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>node</span><span class=p>));</span></span></span></code></pre></div><p>Finally, we initialize the fields in <code>head</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>data</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span></span></span></code></pre></div><p>Here&rsquo;s a full C program that inserts values into a linked list and then prints them out:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>head</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>add</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>print</span><span class=p>(</span><span class=kt>void</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>head</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>add</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>add</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>add</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//prints 1, 2, 3, 4 on separate lines
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>print</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>add</span><span class=p>(</span><span class=kt>int</span> <span class=n>num</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//create new node
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>newnode</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=k>struct</span> <span class=n>node</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=n>newnode</span><span class=o>-&gt;</span><span class=n>data</span> <span class=o>=</span> <span class=n>num</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>newnode</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>head</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>head</span> <span class=o>=</span> <span class=n>newnode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//find end of list
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>cur</span> <span class=o>=</span> <span class=n>head</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=p>(</span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cur</span> <span class=o>=</span> <span class=n>cur</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//add newnode after cur
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>cur</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>newnode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>print</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>cur</span> <span class=o>=</span> <span class=n>head</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>cur</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>cur</span><span class=o>-&gt;</span><span class=n>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>cur</span> <span class=o>=</span> <span class=n>cur</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Linked lists in C work almost exactly the same as linked lists in Java or C#. The only differences are:</p><ol><li>We use a struct instead of a class to represent a node</li><li>We use -> instead of . to access values in the node</li></ol><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=pointers-to-pointers-in-linked-lists>Pointers to Pointers in Linked Lists</h1><p>Let&rsquo;s look at how pointers to pointers can be used to eliminate a nuisance we&rsquo;ve had when trying to
insert and delete items in linked lists. For simplicity, we&rsquo;ll consider lists of integers, built using this
structure:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=p>};</span></span></span></code></pre></div><p>Suppose we&rsquo;re trying to write some code to delete a given integer from a list. The straightforward
solution looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//delete node containing i from list pointed to by lp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>lp</span><span class=p>,</span> <span class=o>*</span><span class=n>prevlp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=n>lp</span> <span class=o>=</span> <span class=n>list</span><span class=p>;</span> <span class=n>lp</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>;</span> <span class=n>lp</span> <span class=o>=</span> <span class=n>lp</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>lp</span><span class=o>-&gt;</span><span class=n>item</span> <span class=o>==</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>lp</span> <span class=o>==</span> <span class=n>list</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>list</span> <span class=o>=</span> <span class=n>lp</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>prevlp</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=n>lp</span><span class=o>-&gt;</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>prevlp</span> <span class=o>=</span> <span class=n>lp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This code works, but it has two flaws. One is that it must use an extra variable to keep track of the
node behind the one it&rsquo;s looking at, and the other is that it must use an extra test to special-case the
situation in which the node being deleted is at the head of the list. Both problems arise because the
deletion of a node from the list involves modifying the previous pointer to point to the next node (that
is, the node before the deleted node to point to the one following). But, depending on whether the node
being deleted is the first node in the list or not, the pointer that needs modifying is either the pointer
that points to the head of the list, or the next pointer in the previous node.</p><p>To illustrate this, suppose that we have the list (1, 2, 3) and we&rsquo;re trying to delete the element 1. After
we&rsquo;ve found the element 1, <code>lp</code> points to its node, which just happens to be the same node that the
main list pointer points to, as illustrated in (a) below:</p><p><a href=#R-image-6b49e2d81ab7da8c58f6afc99dd745bc class=lightbox-link><img alt=linkedlistA class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/linkedListA.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6b49e2d81ab7da8c58f6afc99dd745bc><img alt=linkedlistA class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/linkedListA.png></a></p><p>To remove element 1 from the list, then, we must adjust the main list pointer so that it points to 2&rsquo;s
node, the new head of the list (as shown in (b) below):</p><p><a href=#R-image-c8a52cdf3bc5364d6fedb07d9ab491a2 class=lightbox-link><img alt=linkedlistB class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/linkedListB.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c8a52cdf3bc5364d6fedb07d9ab491a2><img alt=linkedlistB class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/linkedListB.png></a></p><p>If we were trying to delete node 2, on the other hand (as illustrated in (c) below):</p><p><a href=#R-image-b3afaa5f322a34749dbb26d827845adc class=lightbox-link><img alt=linkedlistC class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis308/images/linkedListC.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b3afaa5f322a34749dbb26d827845adc><img alt=linkedlistC class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis308/images/linkedListC.png></a></p><p>we&rsquo;d have to adjust node 1&rsquo;s next pointer to point to 3.</p><p>The <code>prevlp</code> pointer keeps track of the previous node we were looking at, since (at other than the first node in the
list) that&rsquo;s the node whose next pointer will need adjusting. (Notice that if we were to delete node 3, we
would copy its next pointer over to 2, but since 3&rsquo;s next pointer is the null pointer, copying it to node 2
would make node 2 the end of the list, as desired.)</p><p>There is another way to write the list-deletion code, which is (in some ways, at least)
much cleaner, by using a pointer to a pointer to a <code>struct node</code>.</p><p>Hint: This pointer will point at the pointer which points at the node we&rsquo;re looking at; it will either
point at the head pointer or at the next pointer of the node we looked at last time. Since this pointer
points at the pointer that points at the node we&rsquo;re looking at, it points at the pointer which
we need to modify if the node we&rsquo;re looking at is the node we&rsquo;re deleting.</p><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 5</div><h1 id=multiple-files>Multiple Files</h1><p>Up to this point, all of our programs have been written within a
single file. There is nothing wrong with this – a C program is just
a bunch of functions, and it&rsquo;s fine to group those functions within a
single file. However, as your programs get bigger, it&rsquo;s nice to
physically separate functions into different files. This makes it
easier to find certain pieces of your program.</p><p>Separating functions also promotes reuse. Right now, if we
wanted to reuse a function we’d written in another program, we would
have to copy it from our old program to our new one. With
multiple files, we can separate the functions we want reused and
just link to that file when we want to use them (this is like
separating the C library functions and including them when we
want to use them).</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Multiple Files</h1><article class=default><header class=headline></header><h1 id=header-files>Header Files</h1><p>Our first step in writing a program with multiple files is to just
divide related functions into different .c files. However, suppose
we&rsquo;re in our main function and we call a function from a different
file? This is just like calling a C library function without using any
include statements. The compiler will not know where to find the
outside function.</p><p>To solve this within the C libraries, function prototypes are placed
in header files (.h files). The functions themselves are
implemented in corresponding .c files. If I want to use a C library
function, I include the appropriate header file so that the compiler
knows about the function.</p><p>This is what we will do with our C programs. First, we will have a
&ldquo;main file&rdquo; that contains the main function and any other function
we do not want to reuse. This code will stay in a .c file as we&rsquo;ve
done before. Then, we will divide other functions among several
.c files (functions that are related in some way are usually put in
the same file). For each of these .c files, we will make a corresponding .h file
with the same name that contains the prototypes of each
function. Finally, we will include these header files from our main
file.</p><h2 id=one-file-program>One-File Program</h2><p>To see how this works, consider the example below, which is in
the file <code>prog.c</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//later, we will move these three prototypes into stats.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//main function will stay here
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>*</span> <span class=n>nums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter size of array: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>length</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>nums</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=n>length</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>nums</span><span class=o>+</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The min is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>min</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The max is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>max</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The average is: %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>avg</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//later, we will move these three functions into stats.c
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>min</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>max</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=o>/</span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=multiple-files-program>Multiple Files Program</h2><p>Suppose we want to be able to reuse our <code>min</code>, <code>max</code>, and <code>avg</code>
functions. We would create a new file, <code>stats.h</code>, with the
<code>min</code>, <code>max</code>, and <code>avg</code> prototypes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// stats.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#ifndef STATS_H
</span></span></span><span class=line><span class=cl><span class=cp>#define STATS_H
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=cp>#endif</span></span></span></code></pre></div><p>(Notice the <code>ifndef</code> statement, and defining the constant
<code>STATS_H</code>. This is standard when writing header files to keep the
same code from being included twice. Just surround your .h file
with a similar statement – changing the <code>STATS_H</code> constant to
match your header file&rsquo;s name.)</p><p>Next, we would create the new file <code>stats.c</code> with the implementations of
the <code>min</code>, <code>max</code>, and <code>avg</code> functions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//stats.c
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//We must include the corresponding header file
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;stats.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>min</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>max</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>,</span> <span class=kt>int</span> <span class=n>size</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=o>/</span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Finally, we can rewrite our main file, <code>prog.c</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//prog.c
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//include our header file
</span></span></span><span class=line><span class=cl><span class=c1>//use &#34;&#34; since it is in the current directory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;stats.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>*</span> <span class=n>nums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter size of array: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>length</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>nums</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=n>length</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>nums</span><span class=o>+</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The min is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>min</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The max is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>max</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The average is: %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>avg</span><span class=p>(</span><span class=n>nums</span><span class=p>,</span> <span class=n>length</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Header files can also contain definitions of types needed for the
corresponding .c file, like structs, unions, and enums.</p><h2 id=compiling-with-multiple-files>Compiling with Multiple Files</h2><p>The way we would compile the original statistics program (in the file <code>prog.c</code>) is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc prog.c</span></span></code></pre></div><p>Now that our program is in two files, we might try:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc prog.c stats.c</span></span></code></pre></div><p>or</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc stats.c
</span></span><span class=line><span class=cl>gcc prog.c</span></span></code></pre></div><p>&mldr;but in fact neither of these statements will get our program to
compile. The trouble is that the C compiler first compiles each .c
file, and then tries to link each of the files together into a single
executable. If we don&rsquo;t tell the compiler how the files are related,
it won&rsquo;t be able to properly link them.</p><p>To compile our new program, we must first compile each file
separately:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc –c stats.c
</span></span><span class=line><span class=cl>gcc –c prog.c</span></span></code></pre></div><p>The –c option forces the compiler to stop after compiling the file,
before trying to link the files or create an executable. These two
instructions will create the object files <code>stats.o</code> and <code>prog.o</code>,
respectively.</p><p>Now, we need to link these two compiled files into
an executable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc stats.o prog.o</span></span></code></pre></div><p>This line will create the executable <code>a.out</code>, which we can now run
as usual.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=makefiles>Makefiles</h1><p>It now takes three lines to compile our program, which is a pain to
have to type every time we make a change. We can simplify
compilation by placing all of the compilation instructions in a
single file called a <em>Makefile</em> (with NO extension).</p><h2 id=here-is-the-format-of-a-makefile>Here is the format of a Makefile:</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>compiler declaration
</span></span><span class=line><span class=cl>compiler flags declaration
</span></span><span class=line><span class=cl>executable name declaration
</span></span><span class=line><span class=cl>header list declaration
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>object list declaration
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>compiling/linking instruction
</span></span><span class=line><span class=cl>cleaning instruction (removing output files)</span></span></code></pre></div><p>(There are many other options for creating Makefiles, but we will use the template above in this class.) Here is the Makefile for our <a href=https://textbooks.cs.ksu.edu/cis308/5-chapter/5_1-headerfiles/ rel=external target=_blank>statistics program</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>//saved in a file name Makefile, with no extension
</span></span><span class=line><span class=cl>CC = gcc
</span></span><span class=line><span class=cl>CFLAGS = -g -Wall
</span></span><span class=line><span class=cl>EXE = nums
</span></span><span class=line><span class=cl>HEADERS = stats.h
</span></span><span class=line><span class=cl>CODE = stats.c prog.c
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>OBJECTS = $(CODE:.c=.o)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nums: $(OBJECTS) $(HEADERS)
</span></span><span class=line><span class=cl>    $(CC) $(CFLAGS) $(OBJECTS) –o $(EXE)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>clean:
</span></span><span class=line><span class=cl>    rm -f *.o *.exe *.out</span></span></code></pre></div><p>Now, let&rsquo;s go through the Makefile one line at a time:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>CC = gcc</span></span></code></pre></div><p>This line declares the variable <code>CC</code>, and says that we&rsquo;re using the
gcc compiler.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>CFLAGS = -g -Wall</span></span></code></pre></div><p>This line declares the variable <code>CFLAGS</code> and states that we will use two compiler flags &ndash; <code>-g</code> and <code>-Wall</code>. You don&rsquo;t have to include this line, but it can be useful. The <code>-g</code> option means that our executable is always built with debugging information, so that we can debug it in gdb. The <code>-Wall</code> option tells the compiler to display warnings. Often times these compiler warnings can give insight into why a program isn&rsquo;t working, as C will let you do many things that you probably don&rsquo;t intend to do (especially with pointers).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>EXE = nums</span></span></code></pre></div><p>This line declares the variable <code>EXE</code> and states that we wish to name our executable &ldquo;nums&rdquo;, instead of the default &ldquo;a.out&rdquo; or a.exe". We can replace &ldquo;nums&rdquo; with whatever we want to use as our executable name. Again, this line is optional.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>HEADERS = stats.h</span></span></code></pre></div><p>This line declared the variable <code>HEADERS</code> and lists all the (user-created) header files used in the program.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>CODE = stats.c prog.c</span></span></code></pre></div><p>This line declares the variable <code>CODE</code> and lists all the code files (.c files) used in the program.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>OBJECTS = $(CODE:.c=.o)</span></span></code></pre></div><p>This declares the variable <code>OBJECTS</code> and instructions to create an object file (.o) for every .c file listed in the <code>CODE</code> variable. (An object file is a single file converted to machine code.) So, since we have the files <code>prog.c</code> and <code>stats.c</code>, will we get the object files <code>prog.o</code> and <code>stats.o</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>nums: $(OBJECTS) $(HEADERS)
</span></span><span class=line><span class=cl>    $(CC) $(CFLAGS) $(OBJECTS) –o $(EXE)</span></span></code></pre></div><p>This line describes how to compile our program. The<code>nums</code> at
the beginning is a name we&rsquo;re giving this compilation instruction –
we could have called it anything. When we put $(OBJECTS) on the top line (and similarly for other variables), this gets the value out of the <code>OBJECTS</code> variable. The top line, <code>$(OBJECTS) $(HEADERS)</code>, states that our program is dependent on all the header files and all the object files. This line says that to compile the program, all the object files must first be made. By listing the header files as a dependency as well, it ensures that if a change was made to a header file then the entire program will be rebuilt.</p><p>When we substitute the values of the variables, the second line
becomes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>gcc -g -Wall prog.o stats.o –o nums</span></span></code></pre></div><p>This line says to link together the two object files, and rename the
executable to <code>nums</code>. (That&rsquo;s the <code>–o nums</code> part). It also says to build the executable with debugging information (<code>g</code>) and to display compiler warnings (<code>-Wall</code>).</p><p>Next, we have:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>clean:
</span></span><span class=line><span class=cl>    rm -f *.o *.exe *.out</span></span></code></pre></div><p>This line says that to clean our program, we want to delete the
object files (<code>*.o</code>), all executable files (<code>*.exe</code> and <code>*.out</code>). The <code>-f</code> option ensures that we will not see a warning if there are no files to remove that match one of the wildcards.</p><h2 id=using-a-makefile>Using a Makefile</h2><p>Now that we have a Makefile, we want to use it to compile our
program. To compile a program with a Makefile, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>make</span></span></code></pre></div><p>This will generate all the object files, link them together, and
create the executable called <code>nums</code>.</p><p>To run our program, we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>./nums</span></span></code></pre></div><p>This is the same as what we&rsquo;ve done before to run our program,
but now the executable is named <code>nums</code> instead of <code>a.exe</code>.</p><p>To remove all the output files, we type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>make clean</span></span></code></pre></div><p>This will remove all .o files and executable files.</p><h2 id=makefile-rules>Makefile Rules</h2><p>We could spend the rest of the semester talking about exactly how
Makefiles work and different intricacies and still not cover
everything. Makefiles are a very powerful tool – we&rsquo;ve only
scratched the surface to be able to compile our program in a
specific way.</p><p>Here are some rules to follow as you write your own Makefiles:</p><ul><li>You should always define the variables <code>CC</code>, <code>HEADERS</code>, <code>CODE</code>, and
<code>OBJECTS</code>. The value of <code>HEADERS</code> should be a list of all .h files in your project, and the value of <code>CODE</code> should be a list of all .co files in your program. Your <code>OBJECTS</code> value should always be the same &ndash; <code>$(CODE:.c=.o)</code> (create an object file for every .c file).</li><li>The <code>CFLAGS</code> declaration is optional, but recommended</li><li>The <code>EXE</code> declaration is optional &ndash; if you leave it off (along with the <code>-o $EXE</code> in the compilation instruction), then your executable will be named <code>a.exe</code> (or <code>a.out</code>).</li><li>There should be a tab character at the beginning of the
second line for the <code>nums: instruction</code> and the <code>clean: instruction</code>. This MUST be a tab – spaces won&rsquo;t work.</li><li>For the most part, your Makefiles will remain the same
from program to program. You&rsquo;ll just change the
<code>HEADERS</code> and <code>CODE</code> lists and change the name of the executable.</li></ul><h2 id=getting-make>Getting make</h2><p>The <code>make</code> tool may have already be installed when you installed the <code>gcc</code> compiler. To test, open a terminal and type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>make</span></span></code></pre></div><p>If you see an error that says something about &ldquo;No targets specified and no makefile found&rdquo;, then <code>make</code> is correctly installed. If you see an error that says something like: &ldquo;The term make is not recognized&mldr;&rdquo;, then <code>make</code> is either not installed or the PATH variable does not include its location.</p><h3 id=windows-users>Windows users</h3><p>For Windows users who don&rsquo;t already have <code>make</code>, open an MSYS2 terminal and type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>pacman -S make</span></span></code></pre></div><p>Then, you will need to add the location of <code>make.exe</code> to your PATH environment variable. Look in both <code>C:\msys64\mingw64\bin</code> and <code>C:\msys64\usr\bin</code> &ndash; copy the address of whichever location contains <code>make.exe</code>.</p><p>Click Start, type <em>Environment variables</em>, and select &ldquo;Edit the system environment variables&rdquo;). Click &ldquo;Environment Variables..&rdquo;, then find Path under System variables and click &ldquo;Edit&mldr;&rdquo;. Click &ldquo;New&rdquo;, paste in the address you copied in the previous step, and click OK three times to dismiss each frame.</p><h3 id=mac-users>Mac users</h3><p>For Windows users who don&rsquo;t already have <code>make</code>, open the terminal and enter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>xcode-select --install</span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=extern-variables>Extern Variables</h1><p>Sometimes when our program is in multiple files, we still want to
define variables that are visible to each file. Here&rsquo;s how to do this:</p><ol><li>Declare the global variable in a .h file. This can either
be done in a .h file with some of your function
prototypes, or in a special file, globals.h, that
contains the declarations of all global variables. If you
do use a special globals header file, it does not need a
corresponding .c file.</li><li>Include the .h file wherever you want to use the
variable</li><li>When you want to use the variable, declare:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>extern type name;</span></span></code></pre></div><p>where <code>type</code> is the type of the global variable, and
<code>name</code> is its name. The <code>extern</code> keyword tells the
compiler not to create a new variable, but instead to
find the variable name declared in another file.</p><p>As an example, suppose we want to make the array size a global
variable in our for our earlier <a href=https://textbooks.cs.ksu.edu/cis308/5-chapter/5_1-headerfiles/ rel=external target=_blank>statistics program</a>. Here&rsquo;s
what we&rsquo;d do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//start of stats.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#ifndef STATS_H
</span></span></span><span class=line><span class=cl><span class=cp>#define STATS_H
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//define array size
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//functions no longer need array lengths
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>//end of stats.h
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>////////////////////////////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//start of stats.c
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//We must include the corresponding header file
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;stats.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//say we&#39;re going to use the size variable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>extern</span> <span class=kt>int</span> <span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>min</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>min</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>min</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>min</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>max</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>max</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>max</span> <span class=o>=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>max</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>avg</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>vals</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>size</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>vals</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=o>/</span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//end of stats.c
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>/////////////////////////
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//start of prog.c
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//include our header file
</span></span></span><span class=line><span class=cl><span class=c1>//use &#34;&#34; since it is in the current directory
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;stats.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//declare that we&#39;re using the size variable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>extern</span> <span class=kt>int</span> <span class=n>size</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>*</span> <span class=n>nums</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=n>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter size of array: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>length</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>nums</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=n>length</span><span class=o>*</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter a number: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>nums</span><span class=o>+</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The min is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>min</span><span class=p>(</span><span class=n>nums</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The max is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>max</span><span class=p>(</span><span class=n>nums</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;The average is: %.2lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>avg</span><span class=p>(</span><span class=n>nums</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//end of prog.c
</span></span></span></code></pre></div><p>Notice that we declare the variable in a header file. When we want
to use the <code>size</code> variable, we first include that header file. Then,
we declare <code>size</code> as an extern variable.</p><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 6</div><h1 id=user-defined-types>User-Defined Types</h1><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of User-Defined Types</h1><article class=default><header class=headline></header><h1 id=enums>Enums</h1><p><code>enum</code> provides a way to create integer constants. For instance, in
Java we might declare:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>GOLD</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>SILVER</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>BRONZE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>3</span><span class=p>;</span></span></span></code></pre></div><p>..but really what we want is to create a &ldquo;medal&rdquo; type that can take
on the values GOLD, SILVER, and BRONZE. Moreover, we
want GOLD to mean &ldquo;1&rdquo;, SILVER to mean &ldquo;2&rdquo;, and BRONZE to
mean &ldquo;3&rdquo;.</p><p>(Note: Java does have enums available in its latest version, which are
handled very similarly to how they are in C.)</p><h2 id=defining-enums>Defining Enums</h2><p>Here&rsquo;s the format for defining an enum in C:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>enum typeName {
</span></span><span class=line><span class=cl>    value1,
</span></span><span class=line><span class=cl>    value2,
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>    valueN
</span></span><span class=line><span class=cl>} objectList;</span></span></code></pre></div><p>Here, <code>typeName</code> is the name of the new data type we’re
creating. <code>value1, value2, ..., valueN</code> are the different
values this type can have. Finally, <code>objectList</code> is a list of
variables we want to create of type <code>typeName</code>. In this definition,
<code>typeName</code> and <code>objectList</code> are both optional.</p><p>Here&rsquo;s how we would represent medals using an enum:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>medal</span> <span class=p>{</span><span class=n>gold</span><span class=p>,</span> <span class=n>silver</span><span class=p>,</span> <span class=n>bronze</span><span class=p>};</span></span></span></code></pre></div><h2 id=enum-variables>Enum Variables</h2><p>Now, the type of this enum is <code>enum medal</code>. All variables of
this type can have a value of either <code>gold</code>, <code>silver</code>, or
<code>bronze</code>. Here&rsquo;s how to declare a variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>medal</span> <span class=n>medal100m</span><span class=p>;</span></span></span></code></pre></div><p>And here&rsquo;s how to give this variable the value <code>gold</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>medal100m</span> <span class=o>=</span> <span class=n>gold</span><span class=p>;</span></span></span></code></pre></div><p>We can also use the possible values <code>gold</code>, <code>silver</code>, and
<code>bronze</code> in comparisons:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>medal100m</span> <span class=o>==</span> <span class=n>gold</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=err>“</span><span class=n>You</span> <span class=n>won</span><span class=o>!</span><span class=err>\</span><span class=n>n</span><span class=err>”</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=whats-going-on>What’s Going On?</h2><p>When you declare an enum type, what you’re really doing is
making the enum values into integer constants. For example, in
the medal enum, we&rsquo;re really creating the integer constants:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>gold</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>silver</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>bronze</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span></span></span></code></pre></div><p>So, for instance, to set medal100m to gold, we could also say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>medal100m</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span></span></span></code></pre></div><p>Then the test:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>medal100m</span> <span class=o>==</span> <span class=n>gold</span><span class=p>)</span> <span class=p>{...}</span></span></span></code></pre></div><p>would still evaluate to true, since <code>gold</code> holds the value 0.</p><h2 id=changing-enum-values>Changing Enum Values</h2><p>Our medal example isn&rsquo;t quite right. It has <code>gold</code> with the value 0,
<code>silver</code> with 1, and <code>bronze</code> with 2. But we would like <code>gold</code> to
have the value 1, <code>silver</code> 2, and <code>bronze</code> 3. Fortunately, there&rsquo;s
a way to do that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>medal</span> <span class=p>{</span><span class=n>gold</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>silver</span><span class=p>,</span> <span class=n>bronze</span><span class=p>};</span></span></span></code></pre></div><p>Setting <code>gold</code> to 1 resets the numbering in an enum, so that
<code>silver</code> gets set to 2 and <code>bronze</code> to 3. We also could have
explicitly set each value:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>medal</span> <span class=p>{</span><span class=n>gold</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>silver</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=n>bronze</span> <span class=o>=</span> <span class=mi>3</span><span class=p>};</span></span></span></code></pre></div><p>Here&rsquo;s another example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>example</span> <span class=p>{</span><span class=n>val1</span><span class=p>,</span> <span class=n>val2</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>val3</span><span class=p>,</span> <span class=n>val4</span> <span class=o>=</span> <span class=mi>12</span><span class=p>,</span> <span class=n>val5</span><span class=p>};</span></span></span></code></pre></div><p>Here&rsquo;s how the integer values were assigned:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>val1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>val2</span> <span class=o>=</span> <span class=mi>9</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>val3</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>val4</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>val5</span> <span class=o>=</span> <span class=mi>13</span><span class=p>;</span></span></span></code></pre></div><p>An enum tries to keep numbering in order, unless we explicitly set
a value. Then, it uses that value to reset the numbering.</p><h2 id=examples>Examples</h2><p>There is no bool type in C. However, we can create our own
bool type using an enum:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=kt>bool</span> <span class=p>{</span><span class=nb>false</span><span class=p>,</span> <span class=nb>true</span><span class=p>};</span></span></span></code></pre></div><p>(Notice that false has the value 0 and true has the value
1). Now we can use &ldquo;bool variables&rdquo; like we do in C#:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=kt>bool</span> <span class=n>flag</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>flag</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>flag</span> <span class=o>==</span> <span class=nb>true</span><span class=p>)</span> <span class=p>{...}</span></span></span></code></pre></div><p>We can also use an enum to represent grade levels in high
school. We&rsquo;ll start freshman out at 9, and continue the numbering
from there:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>grade</span> <span class=p>{</span><span class=n>freshman</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>sophomore</span><span class=p>,</span> <span class=n>junior</span><span class=p>,</span> <span class=n>senior</span><span class=p>};</span></span></span></code></pre></div><p>Now we can use this type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>grade</span> <span class=n>class</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>class</span> <span class=o>=</span> <span class=n>freshman</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>class</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>         <span class=c1>//same as sophomore
</span></span></span></code></pre></div><h2 id=enums-inside-structs>Enums inside Structs</h2><p>Since an enum is a valid type, we can put an enum field inside a
struct. For example, suppose we want to create a student struct
that has a name and a grade level. Here’s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//define the enum type
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>enum</span> <span class=n>grade</span> <span class=p>{</span><span class=n>freshman</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>sophomore</span><span class=p>,</span> <span class=n>junior</span><span class=p>,</span> <span class=n>senior</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//define the struct
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=n>student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>enum</span> <span class=n>grade</span> <span class=n>class</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>This code works, but it&rsquo;s overkill. Instead of defining the enum
separately, we want to be able to define it inside the struct. In fact,
ALL we want is a variable of that enum type – we don&rsquo;t even care
about naming the type. The enum name is optional, so we&rsquo;ll leave
it off. Here&rsquo;s our revised definition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>enum</span> <span class=p>{</span><span class=n>freshman</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>sophomore</span><span class=p>,</span> <span class=n>junior</span><span class=p>,</span> <span class=n>senior</span><span class=p>}</span> <span class=n>class</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Now, suppose we want to create a student named Mary who is a
junior. Here&rsquo;s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>student</span> <span class=n>mary</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>mary</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Mary&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>mary</span><span class=p>.</span><span class=n>class</span> <span class=o>=</span> <span class=n>junior</span><span class=p>;</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=unions>Unions</h1><p>A <em>union</em> is a construct in C that can hold one of several types. A
union variable can only hold one value at a time, unlike a struct,
but that value is not restricted to a single type.</p><p>Here&rsquo;s the format for declaring a union:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>union modelName {
</span></span><span class=line><span class=cl>    type1 name1;
</span></span><span class=line><span class=cl>    type2 name2;
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>    typeN nameN;
</span></span><span class=line><span class=cl>} objectList;</span></span></code></pre></div><p>Here, <code>modelName</code> is the name of the type you&rsquo;re creating, each
<code>type name</code> is a type you want to be able to store in this union
plus a name for it, and <code>objectList</code> is a list of variables you
want to create with this union type. Both <code>modelName</code> and
<code>objectList</code> are optional.</p><h2 id=defining-unions>Defining Unions</h2><p>Suppose I want a type that will allow me to store money as dollars
(in a double field) or as yen (in an int field). Here&rsquo;s how I&rsquo;d do
that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>money</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>dollars</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>yen</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>price</span><span class=p>;</span></span></span></code></pre></div><p>This creates a variable called <code>price</code> that has type <code>union money</code>.</p><p>I could also create a variable called <code>price2</code> like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>money</span> <span class=n>price2</span><span class=p>;</span></span></span></code></pre></div><h2 id=union-fields>Union Fields</h2><p>To access a field in a union, use the . notation – just like with a
struct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>variableName</span><span class=p>.</span><span class=n>fieldName</span></span></span></code></pre></div><p>(<code>variableName</code> is the name of the union variable, and
<code>fieldName</code> is the name of the field that we want to access.) If
we had a pointer to a union variable, we would use the -> notation
to access a field.</p><p>For example, I can make the <code>price</code> variable hold 17 yen:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>price</span><span class=p>.</span><span class=n>yen</span> <span class=o>=</span> <span class=mi>17</span><span class=p>;</span></span></span></code></pre></div><p>Or I can make the <code>price</code> variable hold $4.20:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>price</span><span class=p>.</span><span class=n>dollars</span> <span class=o>=</span> <span class=mf>4.20</span><span class=p>;</span></span></span></code></pre></div><p>Note that when I change the value of <code>price</code> from 17 yen to $4.20,
I lose the information about 17 yen. A union variable can only
hold one value at a time, but that value can have different types.</p><h2 id=unions-and-enums>Unions and Enums</h2><p>Suppose we have a variable of type <code>union money</code>, and we want
to print out its value (in either dollars or yen, depending on what is
stored). With what we&rsquo;ve done so far, there is no way to tell
WHICH type is stored in a union variable – it might be yen and it
might be dollars. If we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>money</span> <span class=n>cost</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>cost</span><span class=p>.</span><span class=n>yen</span> <span class=o>=</span> <span class=mi>17</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Dollars: %lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>cost</span><span class=p>.</span><span class=n>dollars</span><span class=p>);</span></span></span></code></pre></div><p>which sets the <code>yen</code> field but then prints the <code>dollars</code> field, the
behavior is undefined. This code is likely to crash or at least have
unpredictable results.</p><p>To solve this problem, we need to keep track of which type we&rsquo;re
storing in a union variable. The most common way to do this is
with an enum. For example, we could declare:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>costK</span> <span class=p>{</span><span class=n>dollarsK</span><span class=p>,</span> <span class=n>yenK</span><span class=p>};</span></span></span></code></pre></div><p>Then if we did:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>money</span> <span class=n>cost</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>cost</span><span class=p>.</span><span class=n>yen</span> <span class=o>=</span> <span class=mi>17</span><span class=p>;</span></span></span></code></pre></div><p>We could also do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>costK</span> <span class=n>costEnum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>costEnum</span> <span class=o>=</span> <span class=n>yenK</span><span class=p>;</span></span></span></code></pre></div><p>Then we could tell which type was stored in our union variable by
checking the value of our enum variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=n>costEnum</span> <span class=o>==</span> <span class=n>yenK</span><span class=p>)</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Yen: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>cost</span><span class=p>.</span><span class=n>yen</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>costEnum</span> <span class=o>==</span> <span class=n>dollarsK</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Dollars: %lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>cost</span><span class=p>.</span><span class=n>dollars</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>We will print the value of the field that we&rsquo;re currently using in the
union.</p><h2 id=structs-inside-unions>Structs inside Unions</h2><p>A struct is a valid type, so we can have a struct be a field in a
union. For example, suppose we wanted to create an animal union
that could be either a dog (struct type) or a cat (struct
type). Furthermore, we want to keep track of the name and breed
of the dog, and the name and color of the cat.</p><p>Here&rsquo;s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>breed</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>dog</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>color</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>cat</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Notice that we don&rsquo;t name the <code>dog</code> struct or the <code>cat</code> struct because
we only want a single variable of that type. Instead, we create a
single <code>dog</code> variable and a single <code>cat</code> variable. Here&rsquo;s how we create
a union variable that holds an orange cat called Tiger:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>animal</span> <span class=n>kitty</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>kitty</span><span class=p>.</span><span class=n>cat</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Tiger&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>kitty</span><span class=p>.</span><span class=n>cat</span><span class=p>.</span><span class=n>color</span><span class=p>,</span> <span class=s>&#34;orange&#34;</span><span class=p>);</span></span></span></code></pre></div><h2 id=unions-inside-structs>Unions inside Structs</h2><p>Similarly, we can put a union inside a struct. For example,
suppose we wanted to keep track of someone&rsquo;s name, what country
they&rsquo;re from, and how much their bill is (in the appropriate
currency). We could store the country with an enum, and the bill
(with different currency) as a union. Here’s how:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>guest</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>enum</span> <span class=p>{</span><span class=n>USA</span><span class=p>,</span> <span class=n>France</span><span class=p>,</span> <span class=n>Japan</span><span class=p>}</span> <span class=n>country</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>union</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>dollars</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>euro</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>yen</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>cost</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Now if we want the guest Maria from France, who paid 100 euro,
here&rsquo;s what we&rsquo;d do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>guest</span> <span class=n>maria</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>maria</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Maria&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>maria</span><span class=p>.</span><span class=n>country</span> <span class=o>=</span> <span class=n>France</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>maria</span><span class=p>.</span><span class=n>cost</span><span class=p>.</span><span class=n>euro</span> <span class=o>=</span> <span class=mf>100.0</span><span class=p>;</span></span></span></code></pre></div><h2 id=unions-as-inheritance>Unions as Inheritance</h2><p>The union construct allows us to simulate inheritance from other languages. For
example, suppose we defined the following abstract class in C#:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=k>class</span> <span class=nc>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Suppose as well that we have two C# classes, <code>Student</code> and
<code>Employee</code>, which extend <code>Person</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Student</span> <span class=p>:</span> <span class=n>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>major</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>gpa</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Employee</span> <span class=n>extends</span> <span class=n>Person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>division</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>yearsWorked</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The equivalent in C would be a person structure that holds a name,
age, and a union field. The union field could hold either a student
struct (which has a major and gpa) or an employee struct
(which has a division and a yearsWorked). We would also
need an enum field that keeps track of which type in the union is
active.</p><p>Here&rsquo;s what it would look like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>union</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>major</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=kt>double</span> <span class=n>gpa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=n>student</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>division</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>yearsWorked</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=n>employee</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>type</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>enum</span> <span class=p>{</span><span class=n>employeeK</span><span class=p>,</span> <span class=n>studentK</span><span class=p>}</span> <span class=n>typeK</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>Suppose a student has the following information:</p><ul><li>Name: Bob Jones</li><li>Age: 18</li><li>Major: CMPEN</li><li>GPA: 3.2</li></ul><p>Here&rsquo;s how we would create a variable to represent that student:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=n>bob</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>bob</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Bob Jones&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>bob</span><span class=p>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>bob</span><span class=p>.</span><span class=n>type</span><span class=p>.</span><span class=n>student</span><span class=p>.</span><span class=n>major</span><span class=p>,</span> <span class=s>&#34;CMPEN&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>bob</span><span class=p>.</span><span class=n>type</span><span class=p>.</span><span class=n>student</span><span class=p>.</span><span class=n>gpa</span> <span class=o>=</span> <span class=mf>3.2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>bob</span><span class=p>.</span><span class=n>typeK</span> <span class=o>=</span> <span class=n>studentK</span><span class=p>;</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=typedef>typedef</h1><p>It gets a bit cumbersome to use types called <code>struct person</code>
and <code>enum grade</code>. It would be much nicer to be able to call
them just <code>person</code> or <code>grade</code>. With C&rsquo;s typedef construct, we
can do just that.</p><p>The format of typedef is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>typedef oldType newType;</span></span></code></pre></div><p>Here, we rename <code>type oldType</code> to the new name <code>newType</code>. We
can now create variables using the name <code>newType</code>. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>char</span> <span class=n>letterGrade</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>letterGrade</span> <span class=n>g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>g</span> <span class=o>=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span></span></span></code></pre></div><p>Notice that we treat our new <code>letterGrade</code> type just like it was a
char. The only difference is that when we declare the variable, we
can use <code>letterGrade</code> as the type instead of char.</p><h2 id=typedef-with-structs-unions-and-enums>Typedef with Structs, Unions, and Enums</h2><p>We can do a similar thing to rename structs, unions, and
enums. For example, consider the following struct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>The formal type of the struct is <code>struct person</code>. Now, we
want to rename the type to be just <code>person</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//typedef oldType newType
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>typedef</span> <span class=k>struct</span> <span class=n>person</span> <span class=n>person</span><span class=p>;</span>  
</span></span></code></pre></div><p>Alternatively, we can declare the struct and rename it with typedef
all on the same line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//typedef oldType newType
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>typedef</span> <span class=k>struct</span> <span class=n>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>person</span><span class=p>;</span></span></span></code></pre></div><p>However, we don&rsquo;t need to name the struct now, since we&rsquo;re
always going to be using the new type name when creating
variables of this type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>person</span><span class=p>;</span></span></span></code></pre></div><p>Now we can declare and use a <code>person</code> variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>person</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Bill&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=p>.</span><span class=n>age</span> <span class=o>=</span> <span class=mi>22</span><span class=p>;</span></span></span></code></pre></div><p>We can do a similar thing to rename unions and enums. Consider
the following union:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>union</span> <span class=n>money</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>dollars</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>yen</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>We can rename the union type to <code>money</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>union</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>dollars</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>yen</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>money</span><span class=p>;</span></span></span></code></pre></div><p>Now we can use <code>money</code> as the type name instead of <code>union money</code>. Similarly, consider the following enum:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>enum</span> <span class=n>grade</span><span class=p>{</span><span class=n>freshman</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>sophomore</span><span class=p>,</span> <span class=n>junior</span><span class=p>,</span> <span class=n>senior</span><span class=p>};</span></span></span></code></pre></div><p>We can rename the enum type to <code>grade</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>enum</span> <span class=p>{</span><span class=n>freshman</span> <span class=o>=</span> <span class=mi>9</span><span class=p>,</span> <span class=n>sophomore</span><span class=p>,</span> <span class=n>junior</span><span class=p>,</span> <span class=n>senior</span><span class=p>}</span> <span class=n>grade</span><span class=p>;</span></span></span></code></pre></div><p>Now we can use <code>grade</code> as the type name instead of <code>enum grade</code>.</p><h2 id=typedef-with-linked-lists>Typedef with Linked Lists</h2><p>Consider the following structure for a node in a linked list:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span></span></span></code></pre></div><p>We can try to rename the <code>struct node</code> type to <code>node</code> using
typedef:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>node</span><span class=p>;</span></span></span></code></pre></div><p>However, this will give us a compiler error. The reason is that this
struct is self-referential. When we declare the field <code>node *next</code> in the struct, the compiler hasn&rsquo;t yet seen that we&rsquo;re
renaming the type to <code>node</code>. If instead we list the field as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span></span></span></code></pre></div><p>we will also get a complaint, as we left off the name of the struct.
If you&rsquo;re using typedef on a self-referential struct, you need to
include BOTH the name of the struct and the name of the renamed
type. The fixed node struct looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=n>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=n>node</span> <span class=o>*</span><span class=n>next</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>node</span><span class=p>;</span></span></span></code></pre></div><p>Here&rsquo;s how we&rsquo;d use it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>node</span> <span class=o>*</span><span class=n>head</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=n>node</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>data</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=n>node</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>next</span><span class=o>-&gt;</span><span class=n>data</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>head</span><span class=o>-&gt;</span><span class=n>next</span><span class=o>-&gt;</span><span class=n>next</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span></span></span></code></pre></div><p>This creates the linked list 4->7.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=user-defined-types-with-pointers>User-Defined Types with Pointers</h1><p>Consider the following struct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>age</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>union</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>major</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=kt>double</span> <span class=n>gpa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=n>student</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>division</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>yearsWorked</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=n>employee</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>type</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>enum</span> <span class=p>{</span><span class=n>employeeK</span><span class=p>,</span> <span class=n>studentK</span><span class=p>}</span> <span class=n>typeK</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>person</span><span class=p>;</span></span></span></code></pre></div><p>Suppose we want to create a pointer to a struct variable with the
following information:</p><ul><li>Name: Bob Jones</li><li>Student</li><li>Age: 18</li><li>Major: EECE</li><li>GPA: 3.2</li></ul><p>First, we&rsquo;d declare a pointer of type <code>person</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>person</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span></span></span></code></pre></div><p>Then we&rsquo;d allocate memory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=n>person</span><span class=p>));</span></span></span></code></pre></div><p>And then we would initialize the fields:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>name</span><span class=p>,</span> <span class=s>&#34;Bob Jones&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=o>-&gt;</span><span class=n>age</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>strcpy</span><span class=p>(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>type</span><span class=p>.</span><span class=n>student</span><span class=p>.</span><span class=n>major</span><span class=p>,</span> <span class=s>&#34;EECE&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=o>-&gt;</span><span class=n>type</span><span class=p>.</span><span class=n>student</span><span class=p>.</span><span class=n>gpa</span> <span class=o>=</span> <span class=mf>3.2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>p</span><span class=o>-&gt;</span><span class=n>typeK</span> <span class=o>=</span> <span class=n>studentK</span><span class=p>;</span></span></span></code></pre></div><p>Notice that we use a -> to access any fields in the struct (since our
variable is a pointer). After we are inside an internal field like a
union, we switch to . notation (since the union is not a pointer).</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=preprocessor-directives>Preprocessor Directives</h1><p>The C pre-processor is a special program that runs before the C
compiler. It processes every line that begins with a #, such as a
#include statement. The pre-processor may add, remove, or
change your code when handling the # statements.</p><h2 id=include>#include</h2><p>We’ve been using the #include statement since our first
program in order to get access to C&rsquo;s library functions (like
printf in stdio.h). When the pre-processor sees a
#include statement, it replaces the #include line with the
contents of the included file. For example, when the pre-processor
sees:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span></span></span></code></pre></div><p>then it replaces that line with the contents of the <code>stdio.h</code> file (which includes definitions for <code>printf</code>,
<code>scanf</code>, <code>fprintf</code>, etc.). Then, when the compiler sees a call to
<code>printf</code>, it knows what you mean because <code>printf</code> is defined in
your file.</p><p>Including a file like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span></span></span></code></pre></div><p>tells the pre-processor to look for <code>stdio.h</code> in the standard
include directory (which is where all the library files live). If
instead you say:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;stdio.h&#34;</span></span></span></code></pre></div><p>the pre-processor will first look for <code>stdio.h</code> in the current
directory. If it can&rsquo;t find the file, it will hen look in the standard
include directory.</p><h2 id=define>#define</h2><p>The <code>#define</code> statement tells the pre-processor to find all
occurrences of one value in your code, and to replace them with
another value. This can be used in two ways: to define constants
and to define macros (simplified functions).</p><h3 id=constants>Constants</h3><p>A constant in C is defined like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#define name value</span></span></code></pre></div><p>Here, <code>name</code> is the name we are giving the constant, and value is
the value we would like it to have. Here is an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define PI 3.14159</span></span></span></code></pre></div><p>Now, we can use <code>PI</code> in our code when we want the value
3.14159. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>radius</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>area</span> <span class=o>=</span> <span class=n>PI</span> <span class=o>*</span> <span class=n>radius</span> <span class=o>*</span> <span class=n>radius</span><span class=p>;</span></span></span></code></pre></div><p>When the pre-processor sees a <code>#define</code> constant, it replaces all
occurrences of the constant&rsquo;s name with it&rsquo;s specified value. So
by the time the pre-processor gets done with it, the above code
looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>radius</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>area</span> <span class=o>=</span> <span class=mf>3.14159</span> <span class=o>*</span> <span class=n>radius</span> <span class=o>*</span> <span class=n>radius</span><span class=p>;</span></span></span></code></pre></div><h3 id=macros>Macros</h3><p>A macro is simplified function that includes a name and a list of
arguments. They are defined using the <code>#define</code> statement, just
like constants. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define SUM(a, b) a+b</span></span></span></code></pre></div><p>When the preprocessor sees a call to the macro, it will replace the
macro call with the macro formula. For example, if we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=nf>SUM</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span></span></span></code></pre></div><p>Then the pre-processor will change the last line to be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//Uses x as a and y as b in the macro formula
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>;</span> 
</span></span></code></pre></div><p>Just like other pre-processor directives, the compiler never sees the
macro itself. It only sees the final result, after the pre-processor
has replaced the macro call with the macro formula.</p><p>As another example, let&rsquo;s try to write a macro that computes the
difference of two squares:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//This is not right!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#define DIFF_SQUARE(a, b) a*a – b*b </span></span></span></code></pre></div><p>This macro may look right (and this is how we would write a
diffSquare function), but it has some problems. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=nf>DIFF_SQUARE</span><span class=p>(</span><span class=n>x</span><span class=o>-</span><span class=n>c</span><span class=p>,</span> <span class=n>y</span><span class=o>-</span><span class=n>d</span><span class=p>);</span></span></span></code></pre></div><p>The pre-processor will replace the call to <code>DIFF_SQUARE</code> with the
macro value. It will use <code>x-c</code> as the value for <code>a</code>, and <code>y-d</code> as
the value for <code>b</code>. Here&rsquo;s what the last line will become:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=n>x</span><span class=o>-</span><span class=n>c</span><span class=o>*</span><span class=n>x</span><span class=o>-</span><span class=n>c</span> <span class=err>–</span> <span class=n>y</span><span class=o>-</span><span class=n>d</span><span class=o>*</span><span class=n>y</span><span class=o>-</span><span class=n>d</span><span class=p>;</span></span></span></code></pre></div><p>However, what we WANT is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>result</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span><span class=o>-</span><span class=n>c</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=n>x</span><span class=o>-</span><span class=n>c</span><span class=p>)</span> <span class=err>–</span> <span class=p>(</span><span class=n>y</span><span class=o>-</span><span class=n>d</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=n>y</span><span class=o>-</span><span class=n>d</span><span class=p>);</span></span></span></code></pre></div><p>To get this substitution, we need to add parentheses to the original
macro:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define DIFF_SQUARE(a, b) (a)*(a) – (b)*(b)</span></span></span></code></pre></div><p>Here is a macro that returns the minimum of two numbers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define MIN(a, b) a &lt; b ? a : b</span></span></span></code></pre></div><p>This uses the ternary conditional operator. It means: if <code>a</code> is less
then <code>b</code>, then <code>a</code> is the minimum. Otherwise, <code>b</code> is the minimum.</p><p>Here is a macro that eats all input left in the input buffer. This can
be VERY useful as any unexpected input will stay in the input
buffer. It reads one character at a time until it runs out of input.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define FLUSH() while (getchar() != &#39;\n&#39;)</span></span></span></code></pre></div><h2 id=ifdef-ifndef>#ifdef, #ifndef</h2><p>There is also a pre-processor if-statement that checks to see
whether or not a constant has been defined. Here&rsquo;s the format:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#ifdef (pre-processor constant)
</span></span><span class=line><span class=cl>code
</span></span><span class=line><span class=cl>#endif</span></span></code></pre></div><p>The code inside this <code>#ifdef/#endif</code> block will only be
compiled if the pre-processor constant was defined. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define SIZE 10
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//(elsewhere)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#ifdef SIZE
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>int</span> <span class=n>nums</span><span class=p>[</span><span class=n>SIZE</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=cp>#endif</span></span></span></code></pre></div><p>In this example, we only include the <code>int nums[SIZE];</code> line
in our program if the <code>SIZE</code> constant has already been defined.</p><p>There is a similar construct called <code>#ifndef</code>, which evaluates to
true if a constant has NOT been defined. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#ifndef SIZE
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Define SIZE!</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=cp>#endif</span></span></span></code></pre></div><p>The <code>printf</code> statement will only be part of the program if the
<code>SIZE</code> constant has not been defined. The <code>#ifndef</code> statement
will be very useful when we start to break our programs into
several files – it will help ensure that we don&rsquo;t end up including the
same information twice when we link our files together.</p><footer class=footline></footer></article></section><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 7</div><h1 id=pointers-to-functions>Pointers to Functions</h1><p>The pointers we have looked at so far have all been pointers to various types of data objects,
(such as int, char, double, struct person, and pointer-to-int), but it is also possible to have
pointers to functions. Pointers to functions are useful for approximately the same reasons as
pointers to data: when you want an extra level of indirection, or when you&rsquo;d like the same piece of
code to call different functions depending on circumstances.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Pointers to Functions</h1><article class=default><header class=headline></header><h1 id=function-pointer-basics>Function Pointer Basics</h1><h2 id=declaration-syntax>Declaration Syntax</h2><p>Here is the syntax for declaring a function pointer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>return_type (*ptr_name) (args);</span></span></code></pre></div><p>This declares <code>ptr_name</code> as a pointer to a function that returns something of type <code>return_type</code> and that takes the argument types described in <code>args</code>. Here, <code>args</code> is a comma-separated lists of the argument types for a function. For example, <code>args</code> would be <code>(int, double)</code> for a function that took two arguments &ndash; an int followed by a double.</p><p>The extra parentheses around <code>(*ptr_name)</code> are needed because there are precedence relationships in declarations just as there are in expressions. If instead we did:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>//THIS IS INCORRECT FOR DECLARING A FUNCTION POINTER!
</span></span><span class=line><span class=cl>return_type *ptr_name (args);</span></span></code></pre></div><p>We would be declaring a function (NOT a function pointer) whose return type was <code>return_type*</code>.</p><h2 id=declaration-example>Declaration Example</h2><p>Suppose we wish to declare a pointer to a function that returns an int and takes two parameters &ndash; an int followed by a char*. We would write:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>fn_ptr</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>*</span><span class=p>);</span></span></span></code></pre></div><p>Now <code>fn_ptr</code> is a variable of type function pointer to a function that returns an int and takes <code>(int, char*)</code> as arguments.</p><h2 id=initialization-syntax>Initialization Syntax</h2><p>To initialize our <code>fn_ptr</code> variable, we need an existing function whose header matches its declaration &ndash; one that returns an int and takes <code>(int, char*)</code> as arguments. Suppose we have the following function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>addToLength</span><span class=p>(</span><span class=kt>int</span> <span class=n>num</span><span class=p>,</span> <span class=kt>char</span><span class=o>*</span> <span class=n>str</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>num</span> <span class=o>+</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>str</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Suppose we also have our <code>fn_ptr</code> variable declared in a main method. Now we can initialize <code>fn_ptr</code> to point to the beginning of the executable code in the <code>addToLength</code> function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>*</span> <span class=n>test</span> <span class=o>=</span> <span class=s>&#34;hello&#34;</span><span class=p>;</span>       <span class=c1>//declares string constant &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>fn_ptr</span><span class=p>)(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>*</span><span class=p>);</span>  <span class=c1>//declares our function pointer, fn_ptr
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>fn_ptr</span> <span class=o>=</span> <span class=n>addToLength</span><span class=p>;</span>       <span class=c1>//now fn_ptr points to the addToLength function
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that when we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>fn_ptr</span> <span class=o>=</span> <span class=n>addToLength</span><span class=p>;</span></span></span></code></pre></div><p>That we mean: assign to <code>fn_ptr</code> the memory address of the beginning of the executable code in the <code>addToLength</code> function. We could have more pedantically written:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>fn_ptr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>addToLength</span><span class=p>;</span></span></span></code></pre></div><p>To explicitly get the memory address of the <code>addToLength</code> function, and assign that to <code>fn_ptr</code>. However, the <code>&</code> is optional in this case since there is no other way to interpret assigning to a function pointer variable.</p><h2 id=using-function-pointers>Using Function Pointers</h2><p>After you have declared and initialized a function pointer variable, you can use it to call the referenced function (passing the necessary arguments). In our example, we could modify our main method to look like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>result</span><span class=p>;</span>                 <span class=c1>//declare result variable
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>*</span> <span class=n>test</span> <span class=o>=</span> <span class=s>&#34;hello&#34;</span><span class=p>;</span>       <span class=c1>//declares string constant &#34;hello&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>fn_ptr</span><span class=p>)(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>char</span><span class=o>*</span><span class=p>);</span>  <span class=c1>//declares our function pointer, fn_ptr
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>fn_ptr</span> <span class=o>=</span> <span class=n>addToLength</span><span class=p>;</span>       <span class=c1>//now fn_ptr points to the addToLength function
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=nf>fn_ptr</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>test</span><span class=p>);</span>  <span class=c1>//call the function referenced by fn_ptr,
</span></span></span><span class=line><span class=cl><span class=c1></span>                                <span class=c1>//passing 3 and test. Store the returned value
</span></span></span><span class=line><span class=cl><span class=c1></span>                                <span class=c1>//in the ans variable
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>ans</span><span class=p>);</span>     <span class=c1>//in our example, prints 8
</span></span></span><span class=line><span class=cl><span class=c1></span>                                <span class=c1>//(the length of &#34;hello&#34; plus 3)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that we use <code>fn_ptr</code> as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=nf>fn_ptr</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>test</span><span class=p>);</span></span></span></code></pre></div><p>This calls the function referenced by <code>fn_ptr</code> (the <code>addToLength</code> function), passing the arguments 3 and <code>test</code>. The value returned by the referenced (<code>addToLength</code>) function is stored in the <code>ans</code> variable.</p><p>The <code>fn_ptr</code> variable holds the memory address of the beginning of the executable code for the <code>addToLength</code> function. When we do <code>int ans = fn_ptr(3, test)</code>, we want to go to the memory location stored in <code>fn_ptr</code>, and begin executing that code. In other words, we wish to dereference <code>fn_ptr</code>, which we can do with the <code>*</code> operator. We could more precisely write:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=p>(</span><span class=o>*</span><span class=n>fn_ptr</span><span class=p>)(</span><span class=mi>3</span><span class=p>,</span> <span class=n>test</span><span class=p>);</span></span></span></code></pre></div><p>To first go to the executable code referenced by <code>fn_ptr</code>, and then to start executing that code with arguments <code>3</code> and <code>test</code>. As with using the <code>&</code> operator when initializing function pointers, using the dereferencing operator when using a function pointer is optional. There is no other possible meaning of <code>fn_ptr(3, test)</code>, so the function pointer is dereferenced whether we explicitly use the operator or not.</p><p>If we do choose to explicitly dereference, we need to be careful with order of operations. If we instead did:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//THIS IS INCORRECT FOR USING A FUNCTION POINTER!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=o>*</span><span class=nf>fn_ptr</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>test</span><span class=p>);</span></span></span></code></pre></div><p>Then we would first go to the executable code referenced by <code>fn_ptr</code> (the <code>addToLength</code> function), passing our arguments <code>3</code> and <code>test</code>. That code would return <code>8</code>, which is the sum of and the argument <code>3</code> and the string length of <code>hello</code>. Finally, we would assign to <code>ans</code> the result of dereferencing the <code>8</code>. This will lead to either a segmentation fault (the program crashing) or to grabbing an arbirtrary value in memory and claiming it as our answer.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=functions-and-function-pointers>Functions and Function Pointers</h1><p>Since a function pointer is a valid type, we can pass function pointers as arguments to functions and can also return them from functions.</p><h2 id=passing-function-pointers-to-functions>Passing Function Pointers to Functions</h2><p>Recall that the syntax for declaring a function ponter is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>return_type (*ptr_name) (args);</span></span></code></pre></div><p>Where <code>ptr_name</code> is the new variable name for a function pointer that returns something of type <code>return_type</code> and that takes the argument types described in <code>args</code>. We can similarly accept a function pointer as an argument to a function using the same syntax.</p><p>For example, consider the following program:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>plus</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>minus</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>times</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>divide</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>/</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//op is a function pointer to a function that takes two integer arguments
</span></span></span><span class=line><span class=cl><span class=c1>//and returns an integer result
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>doOperation</span><span class=p>(</span><span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>op</span><span class=p>)(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>),</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//calls the function pointed to by op and returns the result
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nf>op</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>num1</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>num2</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Added result: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>doOperation</span><span class=p>(</span><span class=n>plus</span><span class=p>,</span> <span class=n>num1</span><span class=p>,</span> <span class=n>num2</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Multiplied result: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>doOperation</span><span class=p>(</span><span class=n>times</span><span class=p>,</span> <span class=n>num1</span><span class=p>,</span> <span class=n>num2</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The code above will print:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Added result: 7
</span></span><span class=line><span class=cl>Multiplied result: 12</span></span></code></pre></div><p>The above example might seem unnecessarily complicated, as we could have directly called <code>plus</code> and <code>times</code> from <code>main</code> and bypassed the <code>doOperation</code> function altogether. However, using function pointers as arguments can be very powerful &ndash; for example, the <code>stdlib</code> library defines a <code>qsort</code> function that accepts a comparator function pointer as an argument. This way, we can use the same sorting function to sort in a variety of ways &ndash; ascending order, descending order, by length, etc. &ndash; by passing in a different comparator function pointer.</p><h2 id=typedef-and-function-pointers>Typedef and Function Pointers</h2><p>Listing the type of function pointers can be tedious and error-prone. It can be much easier to use <code>typedef</code> once to create a new (more simply named) type representing a particular kind of function pointer, and then use the new type name after that. For example, in our math operations program above, we can first create a new type name for our function pointer type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>typedef</span> <span class=nf>int</span> <span class=p>(</span><span class=o>*</span><span class=n>function</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span></span></span></code></pre></div><p>This creates a new type called <code>function</code> that represents a function pointer to a function that returns an int and takes two int arguments. We can then use the type <code>function</code> in our <code>doOperation</code> method instead of writing out the argument <code>int (*op)(int, int)</code>. Here is the new <code>doOperation</code> function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>doOperation</span><span class=p>(</span><span class=n>function</span> <span class=n>op</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//calls the function pointed to by op and returns the result
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nf>op</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that the type name <code>function</code> can be anything &ndash; this is just the new type name we happened to pick when using <code>typedef</code>.</p><h2 id=returning-function-pointers-from-functions>Returning Function Pointers from Functions</h2><p>Returning function pointers from functions is exactly the same idea as returning any other other type from a function. Ideally, we would first use <code>typedef</code> to create a new type name for the desired type of function pointer. For example, we could add a new function to our operations example above that returns a pointer to the correct operation function based on a char argument:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>function</span> <span class=nf>getOperation</span><span class=p>(</span><span class=kt>char</span> <span class=n>c</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>c</span> <span class=o>==</span> <span class=sc>&#39;+&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>plus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>c</span> <span class=o>==</span> <span class=sc>&#39;-&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>minus</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>c</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>times</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//will return &#39;divide&#39; if a non-operation char argument
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>//is passed
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>divide</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Then, we could use our <code>getOperation</code> function to get the correct operation based on user input:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=n>op</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>num1</span><span class=p>,</span> <span class=n>num2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter number op number (no spaces, like 3+2): &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d%c%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>op</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>opResult</span> <span class=o>=</span> <span class=nf>getOperation</span><span class=p>(</span><span class=n>op</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Result: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=nf>opResult</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span> <span class=n>num2</span><span class=p>));</span></span></span></code></pre></div><p>By saving the correct operation function in <code>opResult</code>, we could then call <code>opResult</code> (which would call either <code>plus</code>, <code>minus</code>, <code>times</code>, or <code>divide</code> based on the value of <code>op</code>) to get the result of the operation.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=arrays-of-function-pointers>Arrays of Function Pointers</h1><p>We can declare arrays of function pointers using the same syntax we use to create arrays of any other type. As we saw in the previous section, it is often easier to first rename our function pointer using <code>typedef</code>, and then to use that new type when declaring an array.</p><p>Consider our operations functions and newly created <code>function</code> type from the previous section:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>//&#39;function&#39; is the name of a new function pointer type
</span></span></span><span class=line><span class=cl><span class=c1>//describing a function that returns an int and takes two int arguments
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>typedef</span> <span class=nf>int</span> <span class=p>(</span><span class=o>*</span><span class=n>function</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>plus</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>minus</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>times</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>divide</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>/</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Since each operation function is the same type, we can create an array of these four function pointers. We can then ask the user to enter an array index corresponding to the desired operation, and access the appropriate function pointer to execute the operation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>num1</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>num2</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>choice</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//declares an array of four function pointers
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>function</span> <span class=n>allOps</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=n>plus</span><span class=p>,</span> <span class=n>minus</span><span class=p>,</span> <span class=n>times</span><span class=p>,</span> <span class=n>divide</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter 0 for plus, 1 for minus, 2 for times, and 3 for divide: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>choice</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Result: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=p>(</span><span class=n>allOps</span><span class=p>[</span><span class=n>choice</span><span class=p>])(</span><span class=n>num1</span><span class=p>,</span> <span class=n>num2</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Here, <code>allOps[choice]</code> accesses a particular function pointer by array index, and then calls that function (passing <code>num1</code> and <code>num2</code>). For example, if the user entered <code>2</code>, then <code>allOps[choice]</code> would access the <code>times</code> function. The code would print:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Result: 12</span></span></code></pre></div><p>Since <code>times(num1, num2)</code> would return 12.</p><footer class=footline></footer></article></section></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis308/commit/67149f1b1c3dfffeaf11fa09cef14508de147aac>Aug 10, 2023</a></p></div></div><script src=/cis308/js/clipboard.min.js?1737135072 defer></script><script src=/cis308/js/perfect-scrollbar.min.js?1737135072 defer></script><script src=/cis308/js/theme.js?1737135072 defer></script></body></html>