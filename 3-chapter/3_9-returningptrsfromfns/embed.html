<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="We can also return pointers from functions via pointer arguments rather than as the formal return value. To explain this, let’s first step back and consider the case of returning a simple type, such as int, from a function via a pointer argument.
If we write the function:
void f(int *ip) { *ip = 5; }And then call it like this:
int i; f(&amp;i);then f will “return” the value 5 by writing it to the location specified by the pointer passed by the caller; in this case, to the caller’s variable i."><meta name=author content="Julie Thornton"><meta name=twitter:card content="summary"><meta name=twitter:title content="Returning Pointers from Functions :: CIS 308 Textbook"><meta name=twitter:description content="We can also return pointers from functions via pointer arguments rather than as the formal return value. To explain this, let’s first step back and consider the case of returning a simple type, such as int, from a function via a pointer argument.
If we write the function:
void f(int *ip) { *ip = 5; }And then call it like this:
int i; f(&amp;i);then f will “return” the value 5 by writing it to the location specified by the pointer passed by the caller; in this case, to the caller’s variable i."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis308/3-chapter/3_9-returningptrsfromfns/embed.html"><meta property="og:site_name" content="CIS 308 Textbook"><meta property="og:title" content="Returning Pointers from Functions :: CIS 308 Textbook"><meta property="og:description" content="We can also return pointers from functions via pointer arguments rather than as the formal return value. To explain this, let’s first step back and consider the case of returning a simple type, such as int, from a function via a pointer argument.
If we write the function:
void f(int *ip) { *ip = 5; }And then call it like this:
int i; f(&amp;i);then f will “return” the value 5 by writing it to the location specified by the pointer passed by the caller; in this case, to the caller’s variable i."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Pointers and Dynamic Memory"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2022-08-16T09:30:39-05:00"><meta itemprop=name content="Returning Pointers from Functions :: CIS 308 Textbook"><meta itemprop=description content="We can also return pointers from functions via pointer arguments rather than as the formal return value. To explain this, let’s first step back and consider the case of returning a simple type, such as int, from a function via a pointer argument.
If we write the function:
void f(int *ip) { *ip = 5; }And then call it like this:
int i; f(&amp;i);then f will “return” the value 5 by writing it to the location specified by the pointer passed by the caller; in this case, to the caller’s variable i."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2022-08-16T09:30:39-05:00"><meta itemprop=wordCount content="281"><title>Returning Pointers from Functions :: CIS 308 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis308/3-chapter/3_9-returningptrsfromfns/ rel=canonical type=text/html title="Returning Pointers from Functions :: CIS 308 Textbook"><link href=/cis308/3-chapter/3_9-returningptrsfromfns/index.xml rel=alternate type=application/rss+xml title="Returning Pointers from Functions :: CIS 308 Textbook"><link href=/cis308/3-chapter/3_9-returningptrsfromfns/index.print.html rel=alternate type=text/html title="Returning Pointers from Functions :: CIS 308 Textbook"><link href=/cis308/3-chapter/3_9-returningptrsfromfns/tele.html rel=alternate type=text/html title="Returning Pointers from Functions :: CIS 308 Textbook"><link href=/cis308/css/fontawesome-all.min.css?1755548968 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/fontawesome-all.min.css?1755548968 rel=stylesheet></noscript><link href=/cis308/css/nucleus.css?1755548968 rel=stylesheet><link href=/cis308/css/auto-complete.css?1755548968 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/auto-complete.css?1755548968 rel=stylesheet></noscript><link href=/cis308/css/perfect-scrollbar.min.css?1755548968 rel=stylesheet><link href=/cis308/css/fonts.css?1755548968 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis308/css/fonts.css?1755548968 rel=stylesheet></noscript><link href=/cis308/css/theme.css?1755548968 rel=stylesheet><link href=/cis308/css/theme-light-theme.css?1755548968 rel=stylesheet id=R-variant-style><link href=/cis308/css/chroma-relearn-light.css?1755548968 rel=stylesheet id=R-variant-chroma-style><link href=/cis308/css/variant.css?1755548968 rel=stylesheet><link href=/cis308/css/print.css?1755548968 rel=stylesheet media=print><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis308",window.index_js_url="/cis308/index.search.js",window.variants&&variants.init(["light-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis308/css/custom.css?1755548968 rel=stylesheet></head><body class="mobile-support embed disableInlineCopyToClipboard" data-url=/cis308/3-chapter/3_9-returningptrsfromfns/embed.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><p>We can also return pointers from functions via
pointer arguments rather than as the formal return value. To explain this, let&rsquo;s first step back and
consider the case of returning a simple type, such as int, from a function via a pointer argument.</p><p>If we write the function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>void</span> <span class=nf>f</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>ip</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>ip</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>And then call it like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nf>f</span><span class=p>(</span><span class=o>&amp;</span><span class=n>i</span><span class=p>);</span></span></span></code></pre></div><p>then <code>f</code> will &ldquo;return&rdquo; the value 5 by writing it to the location specified by the pointer passed by the
caller; in this case, to the caller&rsquo;s variable <code>i</code>. A function might &ldquo;return&rdquo; values in this way if it had
multiple things to return, since a function can only have one formal return value (that is, it can only
return one value via the return statement.) The important thing to notice is that for the function to
return a value of type int, it used a parameter of type pointer-to-int.</p><p>Now, suppose that a function wants to return a pointer in this way. The corresponding parameter will
then have to be a pointer to a pointer. For example, here is a function which tries to allocate
memory for a string of length <code>n</code>, and which returns zero (<code>false</code>) if it fails and 1 (nonzero, or <code>true</code>)
if it succeeds, returning the actual pointer to the allocated memory via a pointer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>int</span> <span class=nf>allocstr</span><span class=p>(</span><span class=kt>int</span> <span class=n>len</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>retptr</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=c1>//+1 for the \0 character
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>char</span> <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=nf>malloc</span><span class=p>(</span><span class=n>len</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>p</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>retptr</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The caller can then do something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>char</span> <span class=o>*</span><span class=n>string</span> <span class=o>=</span> <span class=s>&#34;Hello, world!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>char</span> <span class=o>*</span><span class=n>copystr</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nf>allocstr</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>string</span><span class=p>),</span> <span class=o>&amp;</span><span class=n>copystr</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>strcpy</span><span class=p>(</span><span class=n>copystr</span><span class=p>,</span> <span class=n>string</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=n>stderr</span><span class=p>,</span> <span class=s>&#34;out of memory</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article></div></main></div><script src=/cis308/js/clipboard.min.js?1755548968 defer></script><script src=/cis308/js/perfect-scrollbar.min.js?1755548968 defer></script><script src=/cis308/js/theme.js?1755548968 defer></script><script src=/cis308/js/embed-iframe.js?1755548968 defer></script></body></html>